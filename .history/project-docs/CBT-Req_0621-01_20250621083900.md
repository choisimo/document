# CBT Diary: MongoDB ì—°ë™ ì•„í‚¤í…ì²˜ ê°œì„  ì œì•ˆì„œ

**ì‘ì„±ì¼**: 2025ë…„ 6ì›” 21ì¼  
**ì‘ì„±ì**: CBT Diary ê°œë°œíŒ€  
**ë¬¸ì„œ ëª©ì **: MariaDB + MongoDB í•˜ì´ë¸Œë¦¬ë“œ ì•„í‚¤í…ì²˜ ì œì•ˆ

---

## ğŸ“‹ ëª©ì°¨

```mermaid
mindmap
  root((CBT Diary<br/>MongoDB ì—°ë™))
    ì œì•ˆ ê°œìš”
      í˜„ì¬ ìƒí™© ë¶„ì„
      MongoDB ë„ì… ì´ìœ 
    ê¸°ìˆ ì  ë¶„ì„
      ë°ì´í„° íŠ¹ì„± ë¶„ì„
      ì„±ëŠ¥ ë¹„êµ
      í™•ì¥ì„± ê²€í† 
    ì•„í‚¤í…ì²˜ ì„¤ê³„
      Polyglot Persistence
      ë°ì´í„° ë¶„ì‚° ì „ëµ
      API ë³€ê²½ì‚¬í•­
    êµ¬í˜„ ì „ëµ
      ë‹¨ê³„ë³„ ë§ˆì´ê·¸ë ˆì´ì…˜
      ë¦¬ìŠ¤í¬ ê´€ë¦¬
      í…ŒìŠ¤íŠ¸ ê³„íš
    ê¸°ëŒ€ íš¨ê³¼
      ì„±ëŠ¥ í–¥ìƒ
      ê°œë°œ ìƒì‚°ì„±
      í™•ì¥ì„± í™•ë³´
```

---

## 1. ğŸ“Š ì œì•ˆ ê°œìš”

ë³¸ ë¬¸ì„œëŠ” í˜„ì¬ MariaDB(ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤) ì¤‘ì‹¬ìœ¼ë¡œ êµ¬í˜„ëœ CBT-Diary í”„ë¡œì íŠ¸ì— **MongoDB(ë„íë¨¼íŠ¸ ë°ì´í„°ë² ì´ìŠ¤)**ë¥¼ ë„ì…í•˜ì—¬, ê° ë°ì´í„°ì˜ íŠ¹ì„±ì— ë§ëŠ” ìµœì ì˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” **í•˜ì´ë¸Œë¦¬ë“œ ë°ì´í„°ë² ì´ìŠ¤ ì•„í‚¤í…ì²˜(Polyglot Persistence)**ë¡œ ì „í™˜í•˜ëŠ” ë°©ì•ˆì„ ì œì•ˆí•©ë‹ˆë‹¤.

### ğŸ“ˆ í˜„ì¬ ì‹œìŠ¤í…œ vs ì œì•ˆ ì‹œìŠ¤í…œ

```mermaid
graph LR
    subgraph "í˜„ì¬ (MariaDB Only)"
        A[React Native] --> B[Spring Boot]
        B --> C[(MariaDB)]
        B --> D[(Redis)]
        E[Python AI] --> B
    end

    subgraph "ì œì•ˆ (Hybrid Architecture)"
        F[React Native] --> G[Spring Boot]
        G --> H[(MariaDB<br/>êµ¬ì¡°í™”ëœ ë°ì´í„°)]
        G --> I[(MongoDB<br/>ë¹„êµ¬ì¡°í™”ëœ ë°ì´í„°)]
        G --> J[(Redis<br/>ìºì‹œ)]
        K[Python AI] --> G
    end

    style H fill:#e1f5fe
    style I fill:#fff3e0
    style J fill:#f3e5f5
```

ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì€ ë°ì´í„°ì˜ ìœ ì—°ì„±, í™•ì¥ì„±, ê·¸ë¦¬ê³  ì¡°íšŒ ì„±ëŠ¥ì„ ê·¹ëŒ€í™”í•˜ì—¬ ì„œë¹„ìŠ¤ì˜ ê¸°ìˆ ì  ê²½ìŸë ¥ì„ í•œ ë‹¨ê³„ ë†’ì´ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

---## 2. ğŸ¤” ì™œ MongoDBë¥¼ ë„ì…í•´ì•¼ í•˜ëŠ”ê°€?

í˜„ì¬ ì‹œìŠ¤í…œì€ ì •í˜•í™”ëœ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ë° ê°•ì ì´ ìˆëŠ” MariaDBë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ CBT-Diary ì„œë¹„ìŠ¤ê°€ ë‹¤ë£¨ëŠ” ë°ì´í„° ì¤‘ ì¼ë¶€ëŠ” MongoDBì™€ ê°™ì€ NoSQL ë°ì´í„°ë² ì´ìŠ¤ì— ë” ì í•©í•œ íŠ¹ì„±ì„ ê°€ì§‘ë‹ˆë‹¤.

### ğŸ“Š ë°ì´í„° íŠ¹ì„± ë¶„ì„ ë° ë¹„êµ

```mermaid
quadrantChart
    title ë°ì´í„° íŠ¹ì„±ì— ë”°ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ ì„ íƒ
    x-axis ì €ìœ ì—°ì„± --> ê³ ìœ ì—°ì„±
    y-axis ì €ì„±ëŠ¥ --> ê³ ì„±ëŠ¥

    quadrant-1 MongoDB ìµœì 
    quadrant-2 MongoDB ì í•©
    quadrant-3 MariaDB ì í•©
    quadrant-4 MariaDB ìµœì 

    ì‚¬ìš©ì ì •ë³´: 0.2: 0.8
    ì¸ì¦ í† í°: 0.1: 0.9
    ì¼ê¸° ë‚´ìš©: 0.8: 0.7
    AI ë¶„ì„ê²°ê³¼: 0.9: 0.8
    í™œë™ ë¡œê·¸: 0.7: 0.9
    ì±„íŒ… ì´ë ¥: 0.8: 0.6
```

### ğŸ” ìƒì„¸ ë¹„êµ ë¶„ì„

| ğŸ“‹ ë°ì´í„° ì¢…ë¥˜                   | ğŸ”„ í˜„í™© (MariaDB)                           | âŒ ë¬¸ì œì  ë° í•œê³„                                                                                                                                                                                                                       | âœ… MongoDB ë„ì… ì‹œ ì´ì                                                                                                                                                                                  |
| -------------------------------- | ------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **ğŸ“ ì¼ê¸° ë³¸ë¬¸ ë° AI ë¶„ì„ ê²°ê³¼** | diary, report í…Œì´ë¸”ì— ì •í•´ì§„ ì»¬ëŸ¼ìœ¼ë¡œ ì €ì¥ | **ë¹„ì •í˜• ë°ì´í„°**: ì¼ê¸° ë‚´ìš©ì€ ê¸¸ì´ê°€ ê°€ë³€ì ì¸ ê¸´ í…ìŠ¤íŠ¸ì´ë©°, AI ë¶„ì„ ê²°ê³¼(ê°ì •, ì†”ë£¨ì…˜ ë“±)ëŠ” ë³µì¡í•˜ê³  ì¤‘ì²©ëœ êµ¬ì¡°<br/>**ìœ ì—°ì„± ë¶€ì¡±**: AI ëª¨ë¸ ê°œì„ ìœ¼ë¡œ ë¶„ì„ í•­ëª©ì´ ì¶”ê°€/ë³€ê²½ë  ë•Œë§ˆë‹¤ report í…Œì´ë¸”ì˜ ìŠ¤í‚¤ë§ˆ ë³€ê²½(ALTER TABLE)ì´ í•„ìš” | **ìœ ì—°í•œ ìŠ¤í‚¤ë§ˆ**: JSONê³¼ ìœ ì‚¬í•œ BSON ë„íë¨¼íŠ¸ êµ¬ì¡°ë¡œ, ì¼ê¸° ë‚´ìš©ê³¼ ë³µì¡í•œ AI ë¶„ì„ ê²°ê³¼ë¥¼ ìˆëŠ” ê·¸ëŒ€ë¡œ ì €ì¥<br/>**ì„±ëŠ¥**: ê´€ë ¨ëœ ë°ì´í„°ë¥¼ í•˜ë‚˜ì˜ ë„íë¨¼íŠ¸ì— ë‚´ì¥í•˜ì—¬ JOIN ì—†ì´ í•œ ë²ˆì˜ ì¿¼ë¦¬ë¡œ ë¹ ë¥´ê²Œ ì¡°íšŒ |
| **ğŸ“Š ì‚¬ìš©ì í™œë™ ë¡œê·¸**          | (í˜„ì¬ ë¯¸êµ¬í˜„)                               | í–¥í›„ ì„œë¹„ìŠ¤ í™•ì¥ ì‹œ, ëŒ€ëŸ‰ì˜ ì“°ê¸°(Write) ì‘ì—…ìœ¼ë¡œ ì¸í•œ ë¶€í•˜ ë°œìƒ ê°€ëŠ¥ì„±                                                                                                                                                                  | **ë¹ ë¥¸ ì“°ê¸° ì„±ëŠ¥**: ëŒ€ëŸ‰ì˜ ë¡œê·¸ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì €ì¥<br/>**ë°ì´í„° ë¶„ì„ ìš©ì´**: ì €ì¥ëœ ë¡œê·¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì í–‰ë™ íŒ¨í„´ ë¶„ì„                                                                             |
| **ğŸ”” ì‹¤ì‹œê°„ ì•Œë¦¼ ë°ì´í„°**        | sse_emitter í…Œì´ë¸” ë“± ë³„ë„ êµ¬í˜„ í•„ìš”        | ì‹¤ì‹œê°„ ì•Œë¦¼ êµ¬í˜„ ì‹œ, ì‚¬ìš©ì ì˜¨ë¼ì¸ ìƒíƒœ ë° ì•Œë¦¼ ì½ìŒ ìƒíƒœ ê´€ë¦¬ì˜ ë³µì¡ì„±                                                                                                                                                                 | **Capped Collection**: ì˜¤ë˜ëœ ë°ì´í„° ìë™ ì‚­ì œë¡œ ìµœì‹  ì•Œë¦¼ ëª©ë¡ íš¨ìœ¨ì  ìœ ì§€<br/>**Change Streams**: ë°ì´í„°ë² ì´ìŠ¤ ë³€ê²½ ì‚¬í•­ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°                                                              |

### ğŸ“ˆ ì„±ëŠ¥ ë¹„êµ ì˜ˆì‹œ

```mermaid
gantt
    title ì¿¼ë¦¬ ì„±ëŠ¥ ë¹„êµ (ì¼ê¸° + AI ë¶„ì„ ê²°ê³¼ ì¡°íšŒ)
    dateFormat X
    axisFormat %s ms

    section MariaDB (JOIN)
    ì‚¬ìš©ì ì¡°íšŒ    :0, 50
    ì¼ê¸° ì¡°íšŒ      :50, 150
    AI ë¶„ì„ ì¡°íšŒ   :150, 300
    Total         :0, 300

    section MongoDB (Single Query)
    í†µí•© ë„íë¨¼íŠ¸ ì¡°íšŒ :0, 80
    Total             :0, 80
```

---

## 3. ğŸ¯ MongoDB ì ìš© ëŒ€ìƒ ì„œë¹„ìŠ¤ ë¶„ì„

MongoDBì˜ ì¥ì ì„ ê·¹ëŒ€í™”í•˜ê¸° ìœ„í•´, ë‹¤ìŒ ë°ì´í„°ë“¤ì„ MongoDBë¡œ ì´ì „í•˜ê±°ë‚˜ ì‹ ê·œ ì €ì¥í•˜ëŠ” ê²ƒì„ ì œì•ˆí•©ë‹ˆë‹¤.

### ğŸ“Š ì ìš© ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤

```mermaid
graph TB
    subgraph "ğŸ”¥ ìµœìš°ì„  ì ìš©"
        A[ğŸ“ ì¼ê¸° ë° AI ë¶„ì„ ë¦¬í¬íŠ¸<br/>â€¢ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°<br/>â€¢ ìŠ¤í‚¤ë§ˆ ìœ ì—°ì„± í•„ìˆ˜<br/>â€¢ ë†’ì€ ì¡°íšŒ ë¹ˆë„]
    end

    subgraph "âš¡ ì‹ ê·œ ê¸°ëŠ¥"
        B[ğŸ“Š ì‚¬ìš©ì í™œë™ ë¡œê·¸<br/>â€¢ ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬<br/>â€¢ ë¹ ë¥¸ ì“°ê¸° ì„±ëŠ¥<br/>â€¢ ë¶„ì„ ìµœì í™”]
        C[ğŸ’¬ ëŒ€í™”í˜• AI ì±„íŒ…<br/>â€¢ ì‹¤ì‹œê°„ ë°ì´í„°<br/>â€¢ ì»¨í…ìŠ¤íŠ¸ ìœ ì§€<br/>â€¢ ìœ ì—°í•œ êµ¬ì¡°]
        D[ğŸ”” ì‹¤ì‹œê°„ ì•Œë¦¼<br/>â€¢ ì„ì‹œ ë°ì´í„°<br/>â€¢ ìë™ ë§Œë£Œ<br/>â€¢ ìŠ¤íŠ¸ë¦¬ë° ì§€ì›]
    end

    A --> B
    A --> C
    B --> D
    C --> D

    style A fill:#ffcdd2
    style B fill:#f8bbd9
    style C fill:#e1bee7
    style D fill:#d1c4e9
```

### âœ… [ìµœìš°ì„  ì ìš©] ì¼ê¸° ë° AI ë¶„ì„ ë¦¬í¬íŠ¸

**ì„¤ëª…**: ì‚¬ìš©ìì˜ ì¼ê¸°ì™€ ê·¸ì— ëŒ€í•œ AI ë¶„ì„ ê²°ê³¼ëŠ” ì´ ì„œë¹„ìŠ¤ì˜ ê°€ì¥ í•µì‹¬ì ì¸ ë°ì´í„°ì…ë‹ˆë‹¤. ì´ ë‘˜ì€ ë…¼ë¦¬ì ìœ¼ë¡œ ë§¤ìš° ê°•í•˜ê²Œ ì—°ê²°ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, í•˜ë‚˜ì˜ **"Diary Document"**ë¡œ ë¬¶ì–´ ì €ì¥í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì´ìƒì ì…ë‹ˆë‹¤.

#### ğŸ“„ MongoDB ë°ì´í„° ëª¨ë¸ ì˜ˆì‹œ (diaries ì»¬ë ‰ì…˜)

```mermaid
erDiagram
    DiaryDocument {
        ObjectId _id
        Number userId
        String title
        String content
        String weather
        Date createdAt
        Date updatedAt
        Object report
    }

    ReportSubDocument {
        String status
        Date analysisDate
        Array emotions
        Array cognitiveDistortions
        Array solutions
        Object metadata
    }

    EmotionObject {
        String name
        Number score
        String intensity
    }

    DiaryDocument ||--|| ReportSubDocument : contains
    ReportSubDocument ||--o{ EmotionObject : has
```

```json
{
  "_id": "6492a48f5e3b2e1f8a7b3d9c", // MongoDBì˜ ObjectId
  "userId": 123, // MariaDBì˜ User ID (FK ì—­í• )
  "title": "ì˜¤ëŠ˜ì˜ ì¼ê¸°",
  "content": "ì˜¤ëŠ˜ì€ ë‚ ì”¨ê°€ ì •ë§ ì¢‹ì•„ì„œ ê¸°ë¶„ì´ ìƒì¾Œí–ˆë‹¤...",
  "weather": "ë§‘ìŒ",
  "createdAt": "2025-06-21T10:00:00Z",
  "updatedAt": "2025-06-21T10:00:00Z",
  "report": {
    // AI ë¶„ì„ ê²°ê³¼ë¥¼ ë‚´ì¥(embedded) ë„íë¨¼íŠ¸ë¡œ ì €ì¥
    "status": "COMPLETED",
    "analysisDate": "2025-06-21T10:01:00Z",
    "emotions": [
      { "name": "í–‰ë³µ", "score": 0.8, "intensity": "ë†’ìŒ" },
      { "name": "í‰ì˜¨", "score": 0.6, "intensity": "ë³´í†µ" }
    ],
    "cognitiveDistortions": [
      // AI ëª¨ë¸ì´ ê³ ë„í™”ë˜ì–´ ìƒˆë¡œìš´ í•„ë“œê°€ ìƒê²¨ë„ ìŠ¤í‚¤ë§ˆ ë³€ê²½ ë¶ˆí•„ìš”
      {
        "type": "ê¸ì • í¸í–¥",
        "originalSentence": "ë‚ ì”¨ê°€ ì¢‹ì•„ì„œ ê¸°ë¶„ì´ ìƒì¾Œí–ˆë‹¤",
        "alternativeThought": "ë‚ ì”¨ì™€ ê´€ê³„ì—†ì´ ë‚˜ì˜ ê¸°ë¶„ì„ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.",
        "confidence": 0.7
      }
    ],
    "solutions": ["ì˜¤ëŠ˜ ëŠë‚€ ê¸ì •ì ì¸ ê°ì •ì„ ì¹œêµ¬ì™€ ë‚˜ëˆ ë³´ì„¸ìš”."],
    "metadata": {
      "modelVersion": "GPT-4-turbo",
      "processingTime": 1250,
      "tokensUsed": 245
    }
  }
}
```

### âœ… [ì‹ ê·œ ê¸°ëŠ¥] ì‚¬ìš©ì í™œë™ ë¡œê·¸

**ì„¤ëª…**: API í˜¸ì¶œ ë¡œê·¸, ì£¼ìš” ê¸°ëŠ¥ ì‚¬ìš© ì´ë ¥ ë“±ì„ ì €ì¥í•˜ì—¬ ì„œë¹„ìŠ¤ ìš´ì˜ ë° ë°ì´í„° ë¶„ì„ì— í™œìš©í•©ë‹ˆë‹¤.

#### ğŸ“Š í™œë™ ë¡œê·¸ ë°ì´í„° í”Œë¡œìš°

```mermaid
sequenceDiagram
    participant U as User
    participant A as Auth Server
    participant M as MongoDB
    participant D as Dashboard

    U->>A: API í˜¸ì¶œ
    A->>A: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
    A->>M: í™œë™ ë¡œê·¸ ì €ì¥ (ë¹„ë™ê¸°)
    A->>U: ì‘ë‹µ ë°˜í™˜

    Note over M: ë¡œê·¸ ì§‘ê³„ ì²˜ë¦¬
    M->>D: ë¶„ì„ ë°ì´í„° ì œê³µ
```

#### ğŸ“„ MongoDB ë°ì´í„° ëª¨ë¸ ì˜ˆì‹œ (activity_logs ì»¬ë ‰ì…˜)

```json
{
  "_id": "...",
  "userId": 123,
  "action": "LOGIN_SUCCESS", // ë˜ëŠ” "CREATE_DIARY", "DELETE_DIARY" ë“±
  "ipAddress": "127.0.0.1",
  "timestamp": "2025-06-21T09:00:00Z",
  "details": {
    "device": "Android",
    "osVersion": "13.0",
    "appVersion": "1.2.3",
    "sessionId": "sess_abc123",
    "responseTime": 245,
    "statusCode": 200
  },
  "metadata": {
    "userAgent": "CBT-Diary/1.2.3 (Android 13.0)",
    "referer": "/dashboard",
    "geolocation": {
      "country": "KR",
      "city": "Seoul"
    }
  }
}
```

### âœ… [ì‹ ê·œ ê¸°ëŠ¥] ëŒ€í™”í˜• AI ì±„íŒ… ì´ë ¥

**ì„¤ëª…**: ì‚¬ìš©ìì™€ AI ì±—ë´‡ ê°„ì˜ ëŒ€í™” ë‚´ìš©ì„ ì €ì¥í•©ë‹ˆë‹¤. ê° ëŒ€í™” ì„¸ì…˜ì„ í•˜ë‚˜ì˜ ë„íë¨¼íŠ¸ë¡œ ê´€ë¦¬í•˜ì—¬ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ ì§€í•˜ê¸° ìš©ì´í•©ë‹ˆë‹¤.

#### ğŸ’¬ ì±„íŒ… ì„¸ì…˜ êµ¬ì¡°

```mermaid
graph TD
    A[Chat Session] --> B[Messages Array]
    B --> C[User Message]
    B --> D[Assistant Message]
    B --> E[System Message]

    C --> F[Content]
    C --> G[Timestamp]
    C --> H[Metadata]

    D --> I[Content]
    D --> J[Timestamp]
    D --> K[AI Model Info]

    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#fff3e0
    style D fill:#e8f5e8
    style E fill:#fce4ec
```

#### ğŸ“„ MongoDB ë°ì´í„° ëª¨ë¸ ì˜ˆì‹œ (chat_sessions ì»¬ë ‰ì…˜)

```json
{
  "_id": "...",
  "userId": 123,
  "createdAt": "2025-06-21T11:00:00Z",
  "lastActivity": "2025-06-21T11:15:00Z",
  "status": "active", // active, closed, archived
  "summary": "ìš°ìš¸ê°ì— ëŒ€í•œ ìƒë‹´ ì„¸ì…˜",
  "messages": [
    {
      "role": "user",
      "content": "ì˜¤ëŠ˜ ë„ˆë¬´ ìš°ìš¸í•´ìš”.",
      "timestamp": "2025-06-21T11:00:00Z",
      "metadata": {
        "sentiment": "negative",
        "urgency": "medium"
      }
    },
    {
      "role": "assistant",
      "content": "ë¬´ìŠ¨ ì¼ì´ ìˆìœ¼ì…¨ë‚˜ìš”? ì¡°ê¸ˆ ë” ìì„¸íˆ ì´ì•¼ê¸°í•´ì£¼ì‹¤ ìˆ˜ ìˆë‚˜ìš”?",
      "timestamp": "2025-06-21T11:00:30Z",
      "metadata": {
        "model": "GPT-4",
        "temperature": 0.7,
        "responseTime": 1200
      }
    }
  ],
  "analytics": {
    "totalMessages": 8,
    "averageResponseTime": 1150,
    "userSentiment": "improving",
    "sessionDuration": 900 // seconds
  }
}
```

---

## 4. ğŸ—ï¸ ì œì•ˆ ì•„í‚¤í…ì²˜: Polyglot Persistence

MariaDBì™€ MongoDBë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” í•˜ì´ë¸Œë¦¬ë“œ ì•„í‚¤í…ì²˜ì…ë‹ˆë‹¤. **Auth-server**ê°€ ë‘ ë°ì´í„°ë² ì´ìŠ¤ì™€ ëª¨ë‘ í†µì‹ í•˜ë©°, ë°ì´í„°ì˜ ì„±ê²©ì— ë”°ë¼ ì ì ˆí•œ ì €ì¥ì†Œë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

### ğŸ¯ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "Client Layer"
        Client[ğŸ“± CBT-front<br/>(React-Native)]
    end

    subgraph "API Gateway Layer"
        Gateway[ğŸšª API Gateway<br/>(Optional)]
    end

    subgraph "Application Layer"
        AuthServer[ğŸ” Auth-server<br/>(Spring Boot)]
        AiServer[ğŸ¤– ai-server<br/>(Python/FastAPI)]
    end

    subgraph "Database Layer"
        subgraph "Structured Data"
            RDBMS[(ğŸ—ƒï¸ MariaDB<br/>â€¢ ì‚¬ìš©ì ì •ë³´<br/>â€¢ ì¸ì¦ ë°ì´í„°<br/>â€¢ ê´€ê³„í˜• ë°ì´í„°)]
        end

        subgraph "Semi-Structured Data"
            NoSQL[(ğŸ“„ MongoDB<br/>â€¢ ì¼ê¸° ë‚´ìš©<br/>â€¢ AI ë¶„ì„ ê²°ê³¼<br/>â€¢ í™œë™ ë¡œê·¸<br/>â€¢ ì±„íŒ… ì´ë ¥)]
        end

        subgraph "Cache Layer"
            Cache[(âš¡ Redis<br/>â€¢ ì„¸ì…˜ ì •ë³´<br/>â€¢ Refresh Token<br/>â€¢ ì„ì‹œ ë°ì´í„°)]
        end
    end

    subgraph "External Services"
        OpenAI[ğŸ§  OpenAI API<br/>(GPT Models)]
    end

    Client --> Gateway
    Gateway --> AuthServer
    AuthServer --> AiServer
    AiServer --> OpenAI

    AuthServer -.->|"ì‚¬ìš©ì, ì¸ì¦"| RDBMS
    AuthServer -.->|"ì¼ê¸°, ë¡œê·¸, ì±„íŒ…"| NoSQL
    AuthServer -.->|"ìºì‹œ, ì„¸ì…˜"| Cache

    style RDBMS fill:#e1f5fe
    style NoSQL fill:#fff3e0
    style Cache fill:#f3e5f5
    style AuthServer fill:#e8f5e8
    style AiServer fill:#fce4ec
```

### ğŸ“Š ë°ì´í„° ë¶„ì‚° ì „ëµ

```mermaid
pie title ë°ì´í„° ë¶„ì‚° ë¹„ìœ¨ (ì˜ˆìƒ)
    "MariaDB (êµ¬ì¡°í™”ëœ ë°ì´í„°)" : 25
    "MongoDB (ë¹„êµ¬ì¡°í™”ëœ ë°ì´í„°)" : 60
    "Redis (ìºì‹œ ë°ì´í„°)" : 15
```

### ğŸ”„ ë°ì´í„° ë™ê¸°í™” ì „ëµ

```mermaid
sequenceDiagram
    participant C as Client
    participant A as Auth Server
    participant M as MariaDB
    participant Mo as MongoDB
    participant R as Redis

    Note over A: ì‚¬ìš©ì ì¸ì¦
    C->>A: ë¡œê·¸ì¸ ìš”ì²­
    A->>M: ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
    M-->>A: ì‚¬ìš©ì ë°ì´í„°
    A->>R: ì„¸ì…˜ ì €ì¥
    A-->>C: ì¸ì¦ í† í°

    Note over A: ì¼ê¸° ì‘ì„±
    C->>A: ì¼ê¸° ì €ì¥ ìš”ì²­
    A->>Mo: ì¼ê¸° ë„íë¨¼íŠ¸ ì €ì¥
    Mo-->>A: ì €ì¥ ì™„ë£Œ
    A->>Mo: í™œë™ ë¡œê·¸ ì €ì¥ (ë¹„ë™ê¸°)
    A-->>C: ì €ì¥ ì„±ê³µ ì‘ë‹µ
```

### ğŸ’¾ **ë°ì´í„°ë² ì´ìŠ¤ë³„ ì—­í•  ë¶„ë‹´**

| ğŸ—ƒï¸ **MariaDB (RDBMS)** | ğŸ“„ **MongoDB (NoSQL)**  | âš¡ **Redis (Cache)** |
| ---------------------- | ----------------------- | -------------------- |
| âœ… ì‚¬ìš©ì ê³„ì • ì •ë³´    | âœ… ì¼ê¸° ë‚´ìš© ë° AI ë¶„ì„ | âœ… JWT Refresh Token |
| âœ… ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬   | âœ… ì‚¬ìš©ì í™œë™ ë¡œê·¸     | âœ… ì„¸ì…˜ ì •ë³´         |
| âœ… ì‹œìŠ¤í…œ ì„¤ì •         | âœ… ëŒ€í™”í˜• AI ì±„íŒ… ì´ë ¥  | âœ… ì„ì‹œ ìºì‹œ ë°ì´í„°  |
| âœ… ê´€ë¦¬ì ê¸°ëŠ¥         | âœ… ì‹¤ì‹œê°„ ì•Œë¦¼ ë°ì´í„°   | âœ… API ì‘ë‹µ ìºì‹œ     |

### ğŸ”— ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í†µì‹  íŒ¨í„´

```mermaid
graph LR
    subgraph "Synchronous Communication"
        A[Auth API] -->|HTTP/REST| B[User Service]
        A -->|HTTP/REST| C[Diary Service]
    end

    subgraph "Asynchronous Communication"
        D[Event Publisher] -->|Message Queue| E[Log Service]
        D -->|Message Queue| F[Analytics Service]
        D -->|Message Queue| G[Notification Service]
    end

    subgraph "Data Access Pattern"
        H[Repository Layer] --> I[(MariaDB)]
        H --> J[(MongoDB)]
        H --> K[(Redis)]
    end

    style A fill:#e3f2fd
    style D fill:#fff3e0
    style H fill:#f3e5f5
```

---

## 5. ğŸš€ ë‹¨ê³„ë³„ êµ¬í˜„ ì „ëµ

### ğŸ“… êµ¬í˜„ ë¡œë“œë§µ

```mermaid
gantt
    title MongoDB ë„ì… ë‹¨ê³„ë³„ ì¼ì •
    dateFormat  YYYY-MM-DD
    section Phase 1: ì¸í”„ë¼ êµ¬ì¶•
    Docker í™˜ê²½ ì„¤ì •     :p1-1, 2025-06-22, 3d
    MongoDB ì„¤ì¹˜ ë° ì„¤ì •  :p1-2, after p1-1, 2d
    ê°œë°œí™˜ê²½ êµ¬ì¶•        :p1-3, after p1-2, 2d

    section Phase 2: ë°±ì—”ë“œ ê°œë°œ
    ì˜ì¡´ì„± ì¶”ê°€          :p2-1, after p1-3, 1d
    Repository ê³„ì¸µ ê°œë°œ :p2-2, after p2-1, 5d
    Service ê³„ì¸µ ìˆ˜ì •    :p2-3, after p2-2, 4d
    API ì—”ë“œí¬ì¸íŠ¸ ìˆ˜ì •   :p2-4, after p2-3, 3d

    section Phase 3: ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
    ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± :p3-1, after p2-4, 4d
    í…ŒìŠ¤íŠ¸ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ :p3-2, after p3-1, 2d
    ìš´ì˜ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜   :p3-3, after p3-2, 3d

    section Phase 4: í…ŒìŠ¤íŠ¸ ë° ë°°í¬
    ë‹¨ìœ„ í…ŒìŠ¤íŠ¸          :p4-1, after p3-3, 3d
    í†µí•© í…ŒìŠ¤íŠ¸          :p4-2, after p4-1, 4d
    ì„±ëŠ¥ í…ŒìŠ¤íŠ¸          :p4-3, after p4-2, 3d
    ìš´ì˜ ë°°í¬           :p4-4, after p4-3, 2d
```

### ğŸ³ 1. ì¸í”„ë¼ ì„¤ì • (docker-compose.yml)

docker-compose.yml íŒŒì¼ì— MongoDB ì„œë¹„ìŠ¤ë¥¼ ì¶”ê°€í•˜ê³ , Auth-serverê°€ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë„¤íŠ¸ì›Œí¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

```yaml
# docker-compose.yml ì¶”ê°€ ë‚´ìš©
version: "3.8"

services:
  # ... ê¸°ì¡´ ì„œë¹„ìŠ¤ë“¤ ...

  mongodb:
    image: mongo:7.0
    container_name: cbt-mongodb
    restart: unless-stopped
    environment:
      MONGO_INITDB_ROOT_USERNAME: admin
      MONGO_INITDB_ROOT_PASSWORD: secure_password
      MONGO_INITDB_DATABASE: cbt_diary
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db
      - ./mongo-init:/docker-entrypoint-initdb.d
    networks:
      - cbt-network

  mongo-express:
    image: mongo-express:1.0.0
    container_name: cbt-mongo-express
    restart: unless-stopped
    ports:
      - "8081:8081"
    environment:
      ME_CONFIG_MONGODB_ADMINUSERNAME: admin
      ME_CONFIG_MONGODB_ADMINPASSWORD: secure_password
      ME_CONFIG_MONGODB_URL: mongodb://admin:secure_password@mongodb:27017/
    depends_on:
      - mongodb
    networks:
      - cbt-network

volumes:
  mongodb_data:

networks:
  cbt-network:
    driver: bridge
```

### âš™ï¸ 2. ë°±ì—”ë“œ ì˜ì¡´ì„± ë° ì„¤ì • (Auth-server)

#### ğŸ“¦ build.gradle ì˜ì¡´ì„± ì¶”ê°€

```gradle
dependencies {
    // ... ê¸°ì¡´ ì˜ì¡´ì„±ë“¤ ...

    // MongoDB ê´€ë ¨ ì˜ì¡´ì„±
    implementation 'org.springframework.boot:spring-boot-starter-data-mongodb'
    implementation 'org.springframework.data:spring-data-mongodb'

    // JSON ì²˜ë¦¬ ê°œì„ 
    implementation 'com.fasterxml.jackson.core:jackson-databind'
    implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'

    // í…ŒìŠ¤íŠ¸ìš© ë‚´ì¥ MongoDB
    testImplementation 'de.flapdoodle.embed:de.flapdoodle.embed.mongo'
}
```

#### ğŸ”§ application.properties ì„¤ì •

```properties
# MongoDB ì„¤ì •
spring.data.mongodb.uri=mongodb://admin:secure_password@localhost:27017/cbt_diary?authSource=admin
spring.data.mongodb.auto-index-creation=true

# JPAì™€ MongoDB ê³µì¡´ ì„¤ì •
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false

# ë¡œê¹… ì„¤ì •
logging.level.org.springframework.data.mongodb=DEBUG
logging.level.org.mongodb.driver=INFO
```

### ğŸ›ï¸ 3. ë„ë©”ì¸ ë° ë¦¬í¬ì§€í† ë¦¬ ì¬ì„¤ê³„

#### ğŸ“„ DiaryDocument í´ë˜ìŠ¤

```java
@Document(collection = "diaries")
@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class DiaryDocument {

    @Id
    private String id;

    @Indexed
    private Long userId; // MariaDB Userì™€ ì—°ê²°

    private String title;
    private String content;
    private String weather;

    @CreatedDate
    private LocalDateTime createdAt;

    @LastModifiedDate
    private LocalDateTime updatedAt;

    private ReportSubDocument report;

    // ì¸ë±ìŠ¤ ì„¤ì •ì„ ìœ„í•œ ì»´íŒŒìš´ë“œ ì¸ë±ìŠ¤
    @CompoundIndex(name = "user_date_idx",
                   def = "{'userId': 1, 'createdAt': -1}")
    public static class Indexes {}
}

@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class ReportSubDocument {
    private String status;
    private LocalDateTime analysisDate;
    private List<EmotionData> emotions;
    private List<CognitiveDistortion> cognitiveDistortions;
    private List<String> solutions;
    private AnalysisMetadata metadata;
}
```

#### ğŸ” Repository ì¸í„°í˜ì´ìŠ¤

```java
@Repository
public interface DiaryMongoRepository extends MongoRepository<DiaryDocument, String> {

    // ì‚¬ìš©ìë³„ ì¼ê¸° ì¡°íšŒ (í˜ì´ì§•)
    Page<DiaryDocument> findByUserIdOrderByCreatedAtDesc(
        Long userId, Pageable pageable);

    // íŠ¹ì • ë‚ ì§œ ë²”ìœ„ì˜ ì¼ê¸° ì¡°íšŒ
    List<DiaryDocument> findByUserIdAndCreatedAtBetween(
        Long userId, LocalDateTime start, LocalDateTime end);

    // AI ë¶„ì„ ì™„ë£Œëœ ì¼ê¸°ë§Œ ì¡°íšŒ
    List<DiaryDocument> findByUserIdAndReport_Status(
        Long userId, String status);

    // ì „ë¬¸ ê²€ìƒ‰ (MongoDB Atlas Search í™œìš©)
    @Query("{ '$text': { '$search': ?0 } }")
    List<DiaryDocument> findByContentText(String searchText);

    // ê°ì •ë³„ ì¼ê¸° ì¡°íšŒ
    @Query("{ 'userId': ?0, 'report.emotions.name': ?1 }")
    List<DiaryDocument> findByUserIdAndEmotion(Long userId, String emotion);
}
```

### ğŸ”„ 4. ì„œë¹„ìŠ¤ ë¡œì§ ë³€ê²½ì 

#### âš–ï¸ AS-IS vs TO-BE ë¹„êµ

```mermaid
graph TB
    subgraph "AS-IS (JPA ê¸°ë°˜)"
        A1[DiaryService] --> A2[DiaryRepository]
        A1 --> A3[ReportRepository]
        A2 --> A4[(MariaDB)]
        A3 --> A4
        A5[AI ë¶„ì„ í›„] --> A6[ë³„ë„ Report ì €ì¥]
        A6 --> A7[Diary-Report ì—°ê²°]
    end

    subgraph "TO-BE (MongoDB ê¸°ë°˜)"
        B1[DiaryService] --> B2[DiaryMongoRepository]
        B2 --> B3[(MongoDB)]
        B4[AI ë¶„ì„ í›„] --> B5[Diary Document ì—…ë°ì´íŠ¸]
        B5 --> B6[í•˜ë‚˜ì˜ ë„íë¨¼íŠ¸ì— í†µí•©]
    end

    style A4 fill:#ffcdd2
    style B3 fill:#c8e6c9
```

#### ğŸ“ ì„œë¹„ìŠ¤ ë¡œì§ êµ¬í˜„ ì˜ˆì‹œ

```java
@Service
@Transactional
public class DiaryService {

    private final DiaryMongoRepository diaryMongoRepository;
    private final UserRepository userRepository; // MariaDB
    private final AiAnalysisService aiAnalysisService;

    public DiaryDocument createDiary(Long userId, CreateDiaryRequest request) {
        // 1. ì‚¬ìš©ì ì¡´ì¬ í™•ì¸ (MariaDB)
        User user = userRepository.findById(userId)
            .orElseThrow(() -> new UserNotFoundException("User not found"));

        // 2. ì¼ê¸° ë„íë¨¼íŠ¸ ìƒì„± ë° ì €ì¥ (MongoDB)
        DiaryDocument diary = DiaryDocument.builder()
            .userId(userId)
            .title(request.getTitle())
            .content(request.getContent())
            .weather(request.getWeather())
            .build();

        DiaryDocument savedDiary = diaryMongoRepository.save(diary);

        // 3. AI ë¶„ì„ ìš”ì²­ (ë¹„ë™ê¸°)
        CompletableFuture.runAsync(() -> {
            try {
                ReportSubDocument report = aiAnalysisService.analyzeContent(
                    savedDiary.getContent());
                savedDiary.setReport(report);
                diaryMongoRepository.save(savedDiary);
            } catch (Exception e) {
                log.error("AI ë¶„ì„ ì‹¤íŒ¨: diaryId={}", savedDiary.getId(), e);
            }
        });

        return savedDiary;
    }

    public Page<DiaryDocument> getDiariesByDate(Long userId, LocalDate date,
                                               Pageable pageable) {
        LocalDateTime startOfDay = date.atStartOfDay();
        LocalDateTime endOfDay = date.atTime(23, 59, 59);

        return diaryMongoRepository.findByUserIdAndCreatedAtBetween(
            userId, startOfDay, endOfDay, pageable);
    }
}
```

### ğŸ“Š 5. ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

```mermaid
flowchart TD
    A[ê¸°ì¡´ MariaDB ë°ì´í„°] --> B{ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸}
    B --> C[ë°ì´í„° ê²€ì¦]
    C --> D{ê²€ì¦ ì„±ê³µ?}
    D -->|YES| E[MongoDB ë³€í™˜]
    D -->|NO| F[ì˜¤ë¥˜ ë¡œê·¸ ê¸°ë¡]
    F --> G[ìˆ˜ë™ ìˆ˜ì •]
    G --> C
    E --> H[MongoDB ì €ì¥]
    H --> I[ë™ê¸°í™” ê²€ì¦]
    I --> J{ë™ê¸°í™” ì™„ë£Œ?}
    J -->|YES| K[ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ]
    J -->|NO| L[ë¡¤ë°± ì²˜ë¦¬]

    style A fill:#ffcdd2
    style K fill:#c8e6c9
    style L fill:#ffcdd2
```

---

## 6. ğŸ“ˆ ê¸°ëŒ€ íš¨ê³¼ ë° ì„±ê³¼ ì§€í‘œ

### ğŸ¯ í•µì‹¬ ê¸°ëŒ€ íš¨ê³¼

```mermaid
graph TD
    A[MongoDB ë„ì…] --> B[ê°œë°œ ìœ ì—°ì„± ì¦ëŒ€]
    A --> C[ì„±ëŠ¥ í–¥ìƒ]
    A --> D[í™•ì¥ì„± í™•ë³´]
    A --> E[ìµœì í™”ëœ ì•„í‚¤í…ì²˜]

    B --> B1[ìŠ¤í‚¤ë§ˆ ë³€ê²½ ë¶ˆí•„ìš”]
    B --> B2[ë¹ ë¥¸ ê¸°ëŠ¥ ì¶”ê°€]
    B --> B3[AI ëª¨ë¸ ì‹¤í—˜ ìš©ì´]

    C --> C1[JOIN ì—°ì‚° ì œê±°]
    C --> C2[ë‹¨ì¼ ì¿¼ë¦¬ ì¡°íšŒ]
    C --> C3[ì½ê¸° ì„±ëŠ¥ í–¥ìƒ]

    D --> D1[ìˆ˜í‰ì  í™•ì¥]
    D --> D2[ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬]
    D --> D3[ìƒ¤ë”© ì§€ì›]

    E --> E1[ë°ì´í„° íŠ¹ì„±ë³„ ìµœì í™”]
    E --> E2[ì‹œìŠ¤í…œ íš¨ìœ¨ì„±]
    E --> E3[ì•ˆì •ì„± í–¥ìƒ]

    style A fill:#e3f2fd
    style B fill:#fff3e0
    style C fill:#e8f5e8
    style D fill:#f3e5f5
    style E fill:#fce4ec
```

### ğŸ“Š ì„±ëŠ¥ ê°œì„  ì˜ˆìƒ ì§€í‘œ

```mermaid
graph LR
    subgraph "ì‘ë‹µ ì‹œê°„ ê°œì„ "
        A[ì¼ê¸° ëª©ë¡ ì¡°íšŒ<br/>300ms â†’ 80ms<br/>73% ê°œì„ ]
        B[ì¼ê¸° ìƒì„¸ ì¡°íšŒ<br/>450ms â†’ 120ms<br/>73% ê°œì„ ]
        C[AI ë¶„ì„ ê²°ê³¼ ì¡°íšŒ<br/>200ms â†’ 50ms<br/>75% ê°œì„ ]
    end

    subgraph "ì²˜ë¦¬ëŸ‰ ê°œì„ "
        D[ë™ì‹œ ì‚¬ìš©ì<br/>100 â†’ 500<br/>5ë°° ì¦ê°€]
        E[ì¼ê¸° ì‘ì„± TPS<br/>50 â†’ 200<br/>4ë°° ì¦ê°€]
        F[ë°ì´í„° ì €ì¥ ì†ë„<br/>1000/s â†’ 5000/s<br/>5ë°° ì¦ê°€]
    end

    style A fill:#c8e6c9
    style B fill:#c8e6c9
    style C fill:#c8e6c9
    style D fill:#bbdefb
    style E fill:#bbdefb
    style F fill:#bbdefb
```

### ğŸ’° ë¹„ìš© íš¨ìœ¨ì„± ë¶„ì„

| ğŸ’¡ **í•­ëª©**     | ğŸ”´ **í˜„ì¬ (MariaDB Only)**   | ğŸŸ¢ **ê°œì„  í›„ (Hybrid)**     | ğŸ“ˆ **ì ˆì•½ íš¨ê³¼**    |
| --------------- | ---------------------------- | --------------------------- | ------------------- |
| **ì„œë²„ ë¦¬ì†ŒìŠ¤** | ë‹¨ì¼ DB ì„œë²„ ê³ ì‚¬ì–‘ í•„ìš”     | ì—­í• ë³„ ìµœì í™”ëœ ë¦¬ì†ŒìŠ¤ í• ë‹¹ | **30% ë¹„ìš© ì ˆì•½**   |
| **ê°œë°œ ì‹œê°„**   | ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ ë‹¤ìš´íƒ€ì„ ë°œìƒ | ë¬´ì¤‘ë‹¨ ìŠ¤í‚¤ë§ˆ ë³€ê²½          | **50% ì‹œê°„ ë‹¨ì¶•**   |
| **ìœ ì§€ë³´ìˆ˜**    | ë³µì¡í•œ JOIN ì¿¼ë¦¬ ìµœì í™”      | ë‹¨ìˆœí•œ ë„íë¨¼íŠ¸ ì¡°íšŒ        | **40% ì‘ì—…ëŸ‰ ê°ì†Œ** |
| **í™•ì¥ ë¹„ìš©**   | ìˆ˜ì§ í™•ì¥ (Scale-up)         | ìˆ˜í‰ í™•ì¥ (Scale-out)       | **60% ë¹„ìš© ì ˆì•½**   |

### ğŸ“‹ ìƒì„¸ ì„±ê³¼ ì§€í‘œ

#### ğŸ”§ **ê¸°ìˆ ì  ì§€í‘œ**

- **ì‘ë‹µ ì‹œê°„**: í‰ê·  ì‘ë‹µ ì‹œê°„ 70% ì´ìƒ ê°œì„ 
- **ì²˜ë¦¬ëŸ‰**: ë™ì‹œ ì‚¬ìš©ì ìˆ˜ 5ë°° ì¦ê°€ ì§€ì›
- **ê°€ìš©ì„±**: 99.9% ì´ìƒ ì‹œìŠ¤í…œ ê°€ìš©ì„± ìœ ì§€
- **í™•ì¥ì„±**: ì›” 1TB ì´ìƒ ë°ì´í„° ì¦ê°€ ëŒ€ì‘ ê°€ëŠ¥

#### ğŸ‘¥ **ì‚¬ìš©ì ê²½í—˜ ì§€í‘œ**

- **ë§Œì¡±ë„**: ì‚¬ìš©ì ë§Œì¡±ë„ 4.5/5.0 ì´ìƒ
- **ì´íƒˆë¥ **: ì•± ì´íƒˆë¥  20% ì´ìƒ ê°ì†Œ
- **ì‚¬ìš© ë¹ˆë„**: ì¼ì¼ í™œì„± ì‚¬ìš©ì 30% ì¦ê°€
- **ê¸°ëŠ¥ í™œìš©ë„**: AI ë¶„ì„ ê¸°ëŠ¥ ì‚¬ìš©ë¥  60% ì´ìƒ

#### ğŸ’¼ **ë¹„ì¦ˆë‹ˆìŠ¤ ì§€í‘œ**

- **ê°œë°œ ì†ë„**: ìƒˆ ê¸°ëŠ¥ ê°œë°œ ì‹œê°„ 50% ë‹¨ì¶•
- **ìš´ì˜ ë¹„ìš©**: ì¸í”„ë¼ ìš´ì˜ ë¹„ìš© 30% ì ˆê°
- **ë§¤ì¶œ ì„±ì¥**: ì›” ë§¤ì¶œ 20% ì´ìƒ ì¦ê°€
- **ì‹œì¥ ì ìœ ìœ¨**: CBT ì•± ì‹œì¥ì—ì„œ ê²½ìŸ ìš°ìœ„ í™•ë³´

### âš ï¸ ë¦¬ìŠ¤í¬ ê´€ë¦¬ ë° ëŒ€ì‘ ë°©ì•ˆ

```mermaid
graph TD
    A[ë¦¬ìŠ¤í¬ ì‹ë³„] --> B{ë¦¬ìŠ¤í¬ ìœ í˜•}

    B --> C[ê¸°ìˆ ì  ë¦¬ìŠ¤í¬]
    B --> D[ìš´ì˜ì  ë¦¬ìŠ¤í¬]
    B --> E[ë¹„ì¦ˆë‹ˆìŠ¤ ë¦¬ìŠ¤í¬]

    C --> C1[ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨]
    C --> C2[ì„±ëŠ¥ ì €í•˜]
    C --> C3[í˜¸í™˜ì„± ë¬¸ì œ]

    D --> D1[íŒ€ í•™ìŠµ ê³¡ì„ ]
    D --> D2[ìš´ì˜ ë³µì¡ì„± ì¦ê°€]
    D --> D3[ëª¨ë‹ˆí„°ë§ ì–´ë ¤ì›€]

    E --> E1[ê°œë°œ ì¼ì • ì§€ì—°]
    E --> E2[ì¶”ê°€ ë¹„ìš© ë°œìƒ]
    E --> E3[ì‚¬ìš©ì ì„œë¹„ìŠ¤ ì¤‘ë‹¨]

    C1 --> F1[ë‹¨ê³„ì  ë§ˆì´ê·¸ë ˆì´ì…˜<br/>ë¡¤ë°± ê³„íš ìˆ˜ë¦½]
    C2 --> F2[ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê°•í™”<br/>ëª¨ë‹ˆí„°ë§ ë„êµ¬ ë„ì…]
    C3 --> F3[í˜¸í™˜ì„± ë§¤íŠ¸ë¦­ìŠ¤ ì‘ì„±<br/>ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸]

    D1 --> G1[MongoDB êµìœ¡ í”„ë¡œê·¸ë¨<br/>ë‚´ë¶€ ì„¸ë¯¸ë‚˜ ì§„í–‰]
    D2 --> G2[ìš´ì˜ ë§¤ë‰´ì–¼ ì‘ì„±<br/>ìë™í™” ë„êµ¬ í™œìš©]
    D3 --> G3[í†µí•© ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ<br/>ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬ì¶•]

    E1 --> H1[ë²„í¼ ê¸°ê°„ ì„¤ì •<br/>ë§ˆì¼ìŠ¤í†¤ ê´€ë¦¬]
    E2 --> H2[ì˜ˆì‚° ê³„íš ìˆ˜ë¦½<br/>ë¹„ìš© ëª¨ë‹ˆí„°ë§]
    E3 --> H3[ë¬´ì¤‘ë‹¨ ë°°í¬ ì „ëµ<br/>ê¸´ê¸‰ ëŒ€ì‘ ê³„íš]

    style A fill:#ffcdd2
    style F1 fill:#c8e6c9
    style F2 fill:#c8e6c9
    style F3 fill:#c8e6c9
    style G1 fill:#bbdefb
    style G2 fill:#bbdefb
    style G3 fill:#bbdefb
    style H1 fill:#fff3e0
    style H2 fill:#fff3e0
    style H3 fill:#fff3e0
```

---

## ğŸ“ ê²°ë¡  ë° ì œì•ˆ

### ğŸ¯ **í•µì‹¬ ë©”ì‹œì§€**

CBT Diary í”„ë¡œì íŠ¸ì— MongoDBë¥¼ ë„ì…í•˜ëŠ” ê²ƒì€ ë‹¨ìˆœí•œ ê¸°ìˆ  ìŠ¤íƒ ì¶”ê°€ê°€ ì•„ë‹Œ, **ë¯¸ë˜ ì§€í–¥ì ì¸ ì•„í‚¤í…ì²˜ í˜ì‹ **ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ì „ëµì  ê°€ì¹˜ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```mermaid
mindmap
  root((ì „ëµì  ê°€ì¹˜))
    ê¸°ìˆ ì  ìš°ìœ„
      í™•ì¥ì„± í™•ë³´
      ì„±ëŠ¥ ìµœì í™”
      ê°œë°œ ìƒì‚°ì„± í–¥ìƒ
    ë¹„ì¦ˆë‹ˆìŠ¤ ì„±ì¥
      ë¹ ë¥¸ ê¸°ëŠ¥ ì¶œì‹œ
      ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
      ì‹œì¥ ê²½ìŸë ¥ ê°•í™”
    ìš´ì˜ íš¨ìœ¨ì„±
      ë¹„ìš© ìµœì í™”
      ìœ ì§€ë³´ìˆ˜ ê°„ì†Œí™”
      ì•ˆì •ì„± í–¥ìƒ
```

### ğŸš€ **ë‹¤ìŒ ë‹¨ê³„**

1. **ğŸ“‹ ê¸°ìˆ  ê²€í†  ë° ìŠ¹ì¸** (1ì£¼)

   - ì•„í‚¤í…ì²˜ ë¦¬ë·° íšŒì˜ ì§„í–‰
   - ê¸°ìˆ  ìŠ¤íƒ ìµœì¢… í™•ì •
   - ì˜ˆì‚° ë° ì¼ì • ìŠ¹ì¸

2. **ğŸ”§ PoC (Proof of Concept) ì§„í–‰** (2ì£¼)

   - í•µì‹¬ ê¸°ëŠ¥ í”„ë¡œí† íƒ€ì… ê°œë°œ
   - ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
   - ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ ê²€ì¦

3. **ğŸ“ˆ ë³¸ê²© ê°œë°œ ì°©ìˆ˜** (6ì£¼)
   - ë‹¨ê³„ë³„ êµ¬í˜„ ê³„íšì— ë”°ë¥¸ ê°œë°œ
   - ì§€ì†ì ì¸ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
   - ìš´ì˜ í™˜ê²½ ì¤€ë¹„

### ğŸ’¬ **ë¬¸ì˜ ë° í”¼ë“œë°±**

ë³¸ ì œì•ˆì„œì— ëŒ€í•œ ì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ë‚˜ ê¸°ìˆ ì  ê²€í† ê°€ í•„ìš”í•œ ê²½ìš°, ê°œë°œíŒ€ìœ¼ë¡œ ì—°ë½ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.

- **ğŸ“§ ì´ë©”ì¼**: dev-team@cbt-diary.com
- **ğŸ’¬ ìŠ¬ë™**: #cbt-diary-dev
- **ğŸ“… íšŒì˜ ì¼ì •**: ë§¤ì£¼ í™”ìš”ì¼ 14:00 ê¸°ìˆ  ë¦¬ë·°

---

_ë³¸ ë¬¸ì„œëŠ” CBT Diary í”„ë¡œì íŠ¸ì˜ ê¸°ìˆ ì  ë°œì „ê³¼ ì‚¬ìš©ì ê²½í—˜ í–¥ìƒì„ ìœ„í•´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤._

**ğŸ“Š ë¬¸ì„œ ì •ë³´**

- **ë²„ì „**: v1.0
- **ì‘ì„±ì¼**: 2025ë…„ 6ì›” 21ì¼
- **ê²€í† ì**: ê°œë°œíŒ€
- **ìŠ¹ì¸ì**: CTO
- **ë‹¤ìŒ ë¦¬ë·°**: 2025ë…„ 6ì›” 28ì¼
