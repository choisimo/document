<!DOCTYPE html>
<html>
<head>
<title>CBT-Req_0621-01.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="cbt-diary-mongodb-%EC%97%B0%EB%8F%99-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B0%9C%EC%84%A0-%EC%A0%9C%EC%95%88%EC%84%9C">CBT Diary: MongoDB ì—°ë™ ì•„í‚¤í…ì²˜ ê°œì„  ì œì•ˆì„œ</h1>
<p><strong>ì‘ì„±ì¼</strong>: 2025ë…„ 6ì›” 21ì¼<br>
<strong>ì‘ì„±ì</strong>: CBT Diary ê°œë°œíŒ€<br>
<strong>ë¬¸ì„œ ëª©ì </strong>: MariaDB + MongoDB í•˜ì´ë¸Œë¦¬ë“œ ì•„í‚¤í…ì²˜ ì œì•ˆ</p>
<hr>
<h2 id="%F0%9F%93%8B-%EB%AA%A9%EC%B0%A8">ğŸ“‹ ëª©ì°¨</h2>
<pre><code class="language-mermaid"><div class="mermaid">mindmap
  root((CBT Diary<br/>MongoDB ì—°ë™))
    ì œì•ˆ ê°œìš”
      í˜„ì¬ ìƒí™© ë¶„ì„
      MongoDB ë„ì… ì´ìœ 
    ê¸°ìˆ ì  ë¶„ì„
      ë°ì´í„° íŠ¹ì„± ë¶„ì„
      ì„±ëŠ¥ ë¹„êµ
      í™•ì¥ì„± ê²€í† 
    ì•„í‚¤í…ì²˜ ì„¤ê³„
      Polyglot Persistence
      ë°ì´í„° ë¶„ì‚° ì „ëµ
      API ë³€ê²½ì‚¬í•­
    êµ¬í˜„ ì „ëµ
      ë‹¨ê³„ë³„ ë§ˆì´ê·¸ë ˆì´ì…˜
      ë¦¬ìŠ¤í¬ ê´€ë¦¬
      í…ŒìŠ¤íŠ¸ ê³„íš
    ê¸°ëŒ€ íš¨ê³¼
      ì„±ëŠ¥ í–¥ìƒ
      ê°œë°œ ìƒì‚°ì„±
      í™•ì¥ì„± í™•ë³´
</div></code></pre>
<hr>
<h2 id="1-%F0%9F%93%8A-%EC%A0%9C%EC%95%88-%EA%B0%9C%EC%9A%94">1. ğŸ“Š ì œì•ˆ ê°œìš”</h2>
<p>ë³¸ ë¬¸ì„œëŠ” í˜„ì¬ MariaDB(ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤) ì¤‘ì‹¬ìœ¼ë¡œ êµ¬í˜„ëœ CBT-Diary í”„ë¡œì íŠ¸ì— **MongoDB(ë„íë¨¼íŠ¸ ë°ì´í„°ë² ì´ìŠ¤)**ë¥¼ ë„ì…í•˜ì—¬, ê° ë°ì´í„°ì˜ íŠ¹ì„±ì— ë§ëŠ” ìµœì ì˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” **í•˜ì´ë¸Œë¦¬ë“œ ë°ì´í„°ë² ì´ìŠ¤ ì•„í‚¤í…ì²˜(Polyglot Persistence)**ë¡œ ì „í™˜í•˜ëŠ” ë°©ì•ˆì„ ì œì•ˆí•©ë‹ˆë‹¤.</p>
<h3 id="%F0%9F%93%88-%ED%98%84%EC%9E%AC-%EC%8B%9C%EC%8A%A4%ED%85%9C-vs-%EC%A0%9C%EC%95%88-%EC%8B%9C%EC%8A%A4%ED%85%9C">ğŸ“ˆ í˜„ì¬ ì‹œìŠ¤í…œ vs ì œì•ˆ ì‹œìŠ¤í…œ</h3>
<pre><code class="language-mermaid"><div class="mermaid">graph LR
    subgraph "í˜„ì¬ (MariaDB Only)"
        A[React Native] --> B[Spring Boot]
        B --> C[(MariaDB)]
        B --> D[(Redis)]
        E[Python AI] --> B
    end

    subgraph "ì œì•ˆ (Hybrid Architecture)"
        F[React Native] --> G[Spring Boot]
        G --> H[(MariaDB<br/>êµ¬ì¡°í™”ëœ ë°ì´í„°)]
        G --> I[(MongoDB<br/>ë¹„êµ¬ì¡°í™”ëœ ë°ì´í„°)]
        G --> J[(Redis<br/>ìºì‹œ)]
        K[Python AI] --> G
    end

    style H fill:#e1f5fe
    style I fill:#fff3e0
    style J fill:#f3e5f5
</div></code></pre>
<p>ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì€ ë°ì´í„°ì˜ ìœ ì—°ì„±, í™•ì¥ì„±, ê·¸ë¦¬ê³  ì¡°íšŒ ì„±ëŠ¥ì„ ê·¹ëŒ€í™”í•˜ì—¬ ì„œë¹„ìŠ¤ì˜ ê¸°ìˆ ì  ê²½ìŸë ¥ì„ í•œ ë‹¨ê³„ ë†’ì´ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.</p>
<p>---## 2. ğŸ¤” ì™œ MongoDBë¥¼ ë„ì…í•´ì•¼ í•˜ëŠ”ê°€?</p>
<p>í˜„ì¬ ì‹œìŠ¤í…œì€ ì •í˜•í™”ëœ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ë° ê°•ì ì´ ìˆëŠ” MariaDBë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ CBT-Diary ì„œë¹„ìŠ¤ê°€ ë‹¤ë£¨ëŠ” ë°ì´í„° ì¤‘ ì¼ë¶€ëŠ” MongoDBì™€ ê°™ì€ NoSQL ë°ì´í„°ë² ì´ìŠ¤ì— ë” ì í•©í•œ íŠ¹ì„±ì„ ê°€ì§‘ë‹ˆë‹¤.</p>
<h3 id="%F0%9F%93%8A-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8A%B9%EC%84%B1-%EB%B6%84%EC%84%9D-%EB%B0%8F-%EB%B9%84%EA%B5%90">ğŸ“Š ë°ì´í„° íŠ¹ì„± ë¶„ì„ ë° ë¹„êµ</h3>
<pre><code class="language-mermaid"><div class="mermaid">graph TB
    subgraph "ğŸ”¥ MongoDB ìµœì  ì˜ì—­"
        A[ğŸ“ ì¼ê¸° ë‚´ìš©<br/>ë¹„êµ¬ì¡°í™” + ê³ ì„±ëŠ¥]
        B[ğŸ¤– AI ë¶„ì„ê²°ê³¼<br/>ë¹„êµ¬ì¡°í™” + ê³ ì„±ëŠ¥]
        C[ğŸ“Š í™œë™ ë¡œê·¸<br/>ë¹„êµ¬ì¡°í™” + ê³ ì„±ëŠ¥]
    end

    subgraph "âš¡ MongoDB ì í•© ì˜ì—­"
        D[ğŸ’¬ ì±„íŒ… ì´ë ¥<br/>ë¹„êµ¬ì¡°í™” + ì¤‘ì„±ëŠ¥]
    end

    subgraph "ğŸ—ƒï¸ MariaDB ì í•© ì˜ì—­"
        E[ğŸ‘¤ ì‚¬ìš©ì ì •ë³´<br/>êµ¬ì¡°í™” + ê³ ì„±ëŠ¥]
        F[ğŸ” ì¸ì¦ í† í°<br/>êµ¬ì¡°í™” + ê³ ì„±ëŠ¥]
    end

    A --> MongoDB[(MongoDB<br/>Document DB)]
    B --> MongoDB
    C --> MongoDB
    D --> MongoDB

    E --> MariaDB[(MariaDB<br/>Relational DB)]
    F --> MariaDB

    style A fill:#ff9800
    style B fill:#ff9800
    style C fill:#ff9800
    style D fill:#ffc107
    style E fill:#2196f3
    style F fill:#2196f3
    style MongoDB fill:#4caf50
    style MariaDB fill:#00bcd4
</div></code></pre>
<h3 id="%F0%9F%94%8D-%EC%83%81%EC%84%B8-%EB%B9%84%EA%B5%90-%EB%B6%84%EC%84%9D">ğŸ” ìƒì„¸ ë¹„êµ ë¶„ì„</h3>
<table>
<thead>
<tr>
<th>ğŸ“‹ ë°ì´í„° ì¢…ë¥˜</th>
<th>ğŸ”„ í˜„í™© (MariaDB)</th>
<th>âŒ ë¬¸ì œì  ë° í•œê³„</th>
<th>âœ… MongoDB ë„ì… ì‹œ ì´ì </th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ğŸ“ ì¼ê¸° ë³¸ë¬¸ ë° AI ë¶„ì„ ê²°ê³¼</strong></td>
<td>diary, report í…Œì´ë¸”ì— ì •í•´ì§„ ì»¬ëŸ¼ìœ¼ë¡œ ì €ì¥</td>
<td><strong>ë¹„ì •í˜• ë°ì´í„°</strong>: ì¼ê¸° ë‚´ìš©ì€ ê¸¸ì´ê°€ ê°€ë³€ì ì¸ ê¸´ í…ìŠ¤íŠ¸ì´ë©°, AI ë¶„ì„ ê²°ê³¼(ê°ì •, ì†”ë£¨ì…˜ ë“±)ëŠ” ë³µì¡í•˜ê³  ì¤‘ì²©ëœ êµ¬ì¡°<br/><strong>ìœ ì—°ì„± ë¶€ì¡±</strong>: AI ëª¨ë¸ ê°œì„ ìœ¼ë¡œ ë¶„ì„ í•­ëª©ì´ ì¶”ê°€/ë³€ê²½ë  ë•Œë§ˆë‹¤ report í…Œì´ë¸”ì˜ ìŠ¤í‚¤ë§ˆ ë³€ê²½(ALTER TABLE)ì´ í•„ìš”</td>
<td><strong>ìœ ì—°í•œ ìŠ¤í‚¤ë§ˆ</strong>: JSONê³¼ ìœ ì‚¬í•œ BSON ë„íë¨¼íŠ¸ êµ¬ì¡°ë¡œ, ì¼ê¸° ë‚´ìš©ê³¼ ë³µì¡í•œ AI ë¶„ì„ ê²°ê³¼ë¥¼ ìˆëŠ” ê·¸ëŒ€ë¡œ ì €ì¥<br/><strong>ì„±ëŠ¥</strong>: ê´€ë ¨ëœ ë°ì´í„°ë¥¼ í•˜ë‚˜ì˜ ë„íë¨¼íŠ¸ì— ë‚´ì¥í•˜ì—¬ JOIN ì—†ì´ í•œ ë²ˆì˜ ì¿¼ë¦¬ë¡œ ë¹ ë¥´ê²Œ ì¡°íšŒ</td>
</tr>
<tr>
<td><strong>ğŸ“Š ì‚¬ìš©ì í™œë™ ë¡œê·¸</strong></td>
<td>(í˜„ì¬ ë¯¸êµ¬í˜„)</td>
<td>í–¥í›„ ì„œë¹„ìŠ¤ í™•ì¥ ì‹œ, ëŒ€ëŸ‰ì˜ ì“°ê¸°(Write) ì‘ì—…ìœ¼ë¡œ ì¸í•œ ë¶€í•˜ ë°œìƒ ê°€ëŠ¥ì„±</td>
<td><strong>ë¹ ë¥¸ ì“°ê¸° ì„±ëŠ¥</strong>: ëŒ€ëŸ‰ì˜ ë¡œê·¸ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì €ì¥<br/><strong>ë°ì´í„° ë¶„ì„ ìš©ì´</strong>: ì €ì¥ëœ ë¡œê·¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì í–‰ë™ íŒ¨í„´ ë¶„ì„</td>
</tr>
<tr>
<td><strong>ğŸ”” ì‹¤ì‹œê°„ ì•Œë¦¼ ë°ì´í„°</strong></td>
<td>sse_emitter í…Œì´ë¸” ë“± ë³„ë„ êµ¬í˜„ í•„ìš”</td>
<td>ì‹¤ì‹œê°„ ì•Œë¦¼ êµ¬í˜„ ì‹œ, ì‚¬ìš©ì ì˜¨ë¼ì¸ ìƒíƒœ ë° ì•Œë¦¼ ì½ìŒ ìƒíƒœ ê´€ë¦¬ì˜ ë³µì¡ì„±</td>
<td><strong>Capped Collection</strong>: ì˜¤ë˜ëœ ë°ì´í„° ìë™ ì‚­ì œë¡œ ìµœì‹  ì•Œë¦¼ ëª©ë¡ íš¨ìœ¨ì  ìœ ì§€<br/><strong>Change Streams</strong>: ë°ì´í„°ë² ì´ìŠ¤ ë³€ê²½ ì‚¬í•­ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°</td>
</tr>
</tbody>
</table>
<h3 id="%F0%9F%93%88-%EC%84%B1%EB%8A%A5-%EB%B9%84%EA%B5%90-%EC%98%88%EC%8B%9C">ğŸ“ˆ ì„±ëŠ¥ ë¹„êµ ì˜ˆì‹œ</h3>
<pre><code class="language-mermaid"><div class="mermaid">gantt
    title ì¿¼ë¦¬ ì„±ëŠ¥ ë¹„êµ (ì¼ê¸° + AI ë¶„ì„ ê²°ê³¼ ì¡°íšŒ)
    dateFormat X
    axisFormat %s ms

    section MariaDB (JOIN)
    ì‚¬ìš©ì ì¡°íšŒ    :0, 50
    ì¼ê¸° ì¡°íšŒ      :50, 150
    AI ë¶„ì„ ì¡°íšŒ   :150, 300
    Total         :0, 300

    section MongoDB (Single Query)
    í†µí•© ë„íë¨¼íŠ¸ ì¡°íšŒ :0, 80
    Total             :0, 80
</div></code></pre>
<hr>
<h2 id="3-%F0%9F%8E%AF-mongodb-%EC%A0%81%EC%9A%A9-%EB%8C%80%EC%83%81-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%B6%84%EC%84%9D">3. ğŸ¯ MongoDB ì ìš© ëŒ€ìƒ ì„œë¹„ìŠ¤ ë¶„ì„</h2>
<p>MongoDBì˜ ì¥ì ì„ ê·¹ëŒ€í™”í•˜ê¸° ìœ„í•´, ë‹¤ìŒ ë°ì´í„°ë“¤ì„ MongoDBë¡œ ì´ì „í•˜ê±°ë‚˜ ì‹ ê·œ ì €ì¥í•˜ëŠ” ê²ƒì„ ì œì•ˆí•©ë‹ˆë‹¤.</p>
<h3 id="%F0%9F%93%8A-%EC%A0%81%EC%9A%A9-%EC%9A%B0%EC%84%A0%EC%88%9C%EC%9C%84-%EB%A7%A4%ED%8A%B8%EB%A6%AD%EC%8A%A4">ğŸ“Š ì ìš© ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤</h3>
<pre><code class="language-mermaid"><div class="mermaid">graph TB
    subgraph "ğŸ”¥ ìµœìš°ì„  ì ìš©"
        A[ğŸ“ ì¼ê¸° ë° AI ë¶„ì„ ë¦¬í¬íŠ¸<br/>â€¢ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°<br/>â€¢ ìŠ¤í‚¤ë§ˆ ìœ ì—°ì„± í•„ìˆ˜<br/>â€¢ ë†’ì€ ì¡°íšŒ ë¹ˆë„]
    end

    subgraph "âš¡ ì‹ ê·œ ê¸°ëŠ¥"
        B[ğŸ“Š ì‚¬ìš©ì í™œë™ ë¡œê·¸<br/>â€¢ ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬<br/>â€¢ ë¹ ë¥¸ ì“°ê¸° ì„±ëŠ¥<br/>â€¢ ë¶„ì„ ìµœì í™”]
        C[ğŸ’¬ ëŒ€í™”í˜• AI ì±„íŒ…<br/>â€¢ ì‹¤ì‹œê°„ ë°ì´í„°<br/>â€¢ ì»¨í…ìŠ¤íŠ¸ ìœ ì§€<br/>â€¢ ìœ ì—°í•œ êµ¬ì¡°]
        D[ğŸ”” ì‹¤ì‹œê°„ ì•Œë¦¼<br/>â€¢ ì„ì‹œ ë°ì´í„°<br/>â€¢ ìë™ ë§Œë£Œ<br/>â€¢ ìŠ¤íŠ¸ë¦¬ë° ì§€ì›]
    end

    A --> B
    A --> C
    B --> D
    C --> D

    style A fill:#ffcdd2
    style B fill:#f8bbd9
    style C fill:#e1bee7
    style D fill:#d1c4e9
</div></code></pre>
<h3 id="%E2%9C%85-%EC%B5%9C%EC%9A%B0%EC%84%A0-%EC%A0%81%EC%9A%A9-%EC%9D%BC%EA%B8%B0-%EB%B0%8F-ai-%EB%B6%84%EC%84%9D-%EB%A6%AC%ED%8F%AC%ED%8A%B8">âœ… [ìµœìš°ì„  ì ìš©] ì¼ê¸° ë° AI ë¶„ì„ ë¦¬í¬íŠ¸</h3>
<p><strong>ì„¤ëª…</strong>: ì‚¬ìš©ìì˜ ì¼ê¸°ì™€ ê·¸ì— ëŒ€í•œ AI ë¶„ì„ ê²°ê³¼ëŠ” ì´ ì„œë¹„ìŠ¤ì˜ ê°€ì¥ í•µì‹¬ì ì¸ ë°ì´í„°ì…ë‹ˆë‹¤. ì´ ë‘˜ì€ ë…¼ë¦¬ì ìœ¼ë¡œ ë§¤ìš° ê°•í•˜ê²Œ ì—°ê²°ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, í•˜ë‚˜ì˜ **&quot;Diary Document&quot;**ë¡œ ë¬¶ì–´ ì €ì¥í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì´ìƒì ì…ë‹ˆë‹¤.</p>
<h4 id="%F0%9F%93%84-mongodb-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%AA%A8%EB%8D%B8-%EC%98%88%EC%8B%9C-diaries-%EC%BB%AC%EB%A0%89%EC%85%98">ğŸ“„ MongoDB ë°ì´í„° ëª¨ë¸ ì˜ˆì‹œ (diaries ì»¬ë ‰ì…˜)</h4>
<pre><code class="language-mermaid"><div class="mermaid">erDiagram
    DiaryDocument {
        ObjectId _id
        Number userId
        String title
        String content
        String weather
        Date createdAt
        Date updatedAt
        Object report
    }

    ReportSubDocument {
        String status
        Date analysisDate
        Array emotions
        Array cognitiveDistortions
        Array solutions
        Object metadata
    }

    EmotionObject {
        String name
        Number score
        String intensity
    }

    DiaryDocument ||--|| ReportSubDocument : contains
    ReportSubDocument ||--o{ EmotionObject : has
</div></code></pre>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"_id"</span>: <span class="hljs-string">"6492a48f5e3b2e1f8a7b3d9c"</span>, <span class="hljs-comment">// MongoDBì˜ ObjectId</span>
  <span class="hljs-attr">"userId"</span>: <span class="hljs-number">123</span>, <span class="hljs-comment">// MariaDBì˜ User ID (FK ì—­í• )</span>
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"ì˜¤ëŠ˜ì˜ ì¼ê¸°"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"ì˜¤ëŠ˜ì€ ë‚ ì”¨ê°€ ì •ë§ ì¢‹ì•„ì„œ ê¸°ë¶„ì´ ìƒì¾Œí–ˆë‹¤..."</span>,
  <span class="hljs-attr">"weather"</span>: <span class="hljs-string">"ë§‘ìŒ"</span>,
  <span class="hljs-attr">"createdAt"</span>: <span class="hljs-string">"2025-06-21T10:00:00Z"</span>,
  <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-string">"2025-06-21T10:00:00Z"</span>,
  <span class="hljs-attr">"report"</span>: {
    <span class="hljs-comment">// AI ë¶„ì„ ê²°ê³¼ë¥¼ ë‚´ì¥(embedded) ë„íë¨¼íŠ¸ë¡œ ì €ì¥</span>
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"COMPLETED"</span>,
    <span class="hljs-attr">"analysisDate"</span>: <span class="hljs-string">"2025-06-21T10:01:00Z"</span>,
    <span class="hljs-attr">"emotions"</span>: [
      { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"í–‰ë³µ"</span>, <span class="hljs-attr">"score"</span>: <span class="hljs-number">0.8</span>, <span class="hljs-attr">"intensity"</span>: <span class="hljs-string">"ë†’ìŒ"</span> },
      { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"í‰ì˜¨"</span>, <span class="hljs-attr">"score"</span>: <span class="hljs-number">0.6</span>, <span class="hljs-attr">"intensity"</span>: <span class="hljs-string">"ë³´í†µ"</span> }
    ],
    <span class="hljs-attr">"cognitiveDistortions"</span>: [
      <span class="hljs-comment">// AI ëª¨ë¸ì´ ê³ ë„í™”ë˜ì–´ ìƒˆë¡œìš´ í•„ë“œê°€ ìƒê²¨ë„ ìŠ¤í‚¤ë§ˆ ë³€ê²½ ë¶ˆí•„ìš”</span>
      {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"ê¸ì • í¸í–¥"</span>,
        <span class="hljs-attr">"originalSentence"</span>: <span class="hljs-string">"ë‚ ì”¨ê°€ ì¢‹ì•„ì„œ ê¸°ë¶„ì´ ìƒì¾Œí–ˆë‹¤"</span>,
        <span class="hljs-attr">"alternativeThought"</span>: <span class="hljs-string">"ë‚ ì”¨ì™€ ê´€ê³„ì—†ì´ ë‚˜ì˜ ê¸°ë¶„ì„ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤."</span>,
        <span class="hljs-attr">"confidence"</span>: <span class="hljs-number">0.7</span>
      }
    ],
    <span class="hljs-attr">"solutions"</span>: [<span class="hljs-string">"ì˜¤ëŠ˜ ëŠë‚€ ê¸ì •ì ì¸ ê°ì •ì„ ì¹œêµ¬ì™€ ë‚˜ëˆ ë³´ì„¸ìš”."</span>],
    <span class="hljs-attr">"metadata"</span>: {
      <span class="hljs-attr">"modelVersion"</span>: <span class="hljs-string">"GPT-4-turbo"</span>,
      <span class="hljs-attr">"processingTime"</span>: <span class="hljs-number">1250</span>,
      <span class="hljs-attr">"tokensUsed"</span>: <span class="hljs-number">245</span>
    }
  }
}
</div></code></pre>
<h3 id="%E2%9C%85-%EC%8B%A0%EA%B7%9C-%EA%B8%B0%EB%8A%A5-%EC%82%AC%EC%9A%A9%EC%9E%90-%ED%99%9C%EB%8F%99-%EB%A1%9C%EA%B7%B8">âœ… [ì‹ ê·œ ê¸°ëŠ¥] ì‚¬ìš©ì í™œë™ ë¡œê·¸</h3>
<p><strong>ì„¤ëª…</strong>: API í˜¸ì¶œ ë¡œê·¸, ì£¼ìš” ê¸°ëŠ¥ ì‚¬ìš© ì´ë ¥ ë“±ì„ ì €ì¥í•˜ì—¬ ì„œë¹„ìŠ¤ ìš´ì˜ ë° ë°ì´í„° ë¶„ì„ì— í™œìš©í•©ë‹ˆë‹¤.</p>
<h4 id="%F0%9F%93%8A-%ED%99%9C%EB%8F%99-%EB%A1%9C%EA%B7%B8-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%8C%EB%A1%9C%EC%9A%B0">ğŸ“Š í™œë™ ë¡œê·¸ ë°ì´í„° í”Œë¡œìš°</h4>
<pre><code class="language-mermaid"><div class="mermaid">sequenceDiagram
    participant U as User
    participant A as Auth Server
    participant M as MongoDB
    participant D as Dashboard

    U->>A: API í˜¸ì¶œ
    A->>A: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
    A->>M: í™œë™ ë¡œê·¸ ì €ì¥ (ë¹„ë™ê¸°)
    A->>U: ì‘ë‹µ ë°˜í™˜

    Note over M: ë¡œê·¸ ì§‘ê³„ ì²˜ë¦¬
    M->>D: ë¶„ì„ ë°ì´í„° ì œê³µ
</div></code></pre>
<h4 id="%F0%9F%93%84-mongodb-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%AA%A8%EB%8D%B8-%EC%98%88%EC%8B%9C-activitylogs-%EC%BB%AC%EB%A0%89%EC%85%98">ğŸ“„ MongoDB ë°ì´í„° ëª¨ë¸ ì˜ˆì‹œ (activity_logs ì»¬ë ‰ì…˜)</h4>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"_id"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-attr">"userId"</span>: <span class="hljs-number">123</span>,
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"LOGIN_SUCCESS"</span>, <span class="hljs-comment">// ë˜ëŠ” "CREATE_DIARY", "DELETE_DIARY" ë“±</span>
  <span class="hljs-attr">"ipAddress"</span>: <span class="hljs-string">"127.0.0.1"</span>,
  <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"2025-06-21T09:00:00Z"</span>,
  <span class="hljs-attr">"details"</span>: {
    <span class="hljs-attr">"device"</span>: <span class="hljs-string">"Android"</span>,
    <span class="hljs-attr">"osVersion"</span>: <span class="hljs-string">"13.0"</span>,
    <span class="hljs-attr">"appVersion"</span>: <span class="hljs-string">"1.2.3"</span>,
    <span class="hljs-attr">"sessionId"</span>: <span class="hljs-string">"sess_abc123"</span>,
    <span class="hljs-attr">"responseTime"</span>: <span class="hljs-number">245</span>,
    <span class="hljs-attr">"statusCode"</span>: <span class="hljs-number">200</span>
  },
  <span class="hljs-attr">"metadata"</span>: {
    <span class="hljs-attr">"userAgent"</span>: <span class="hljs-string">"CBT-Diary/1.2.3 (Android 13.0)"</span>,
    <span class="hljs-attr">"referer"</span>: <span class="hljs-string">"/dashboard"</span>,
    <span class="hljs-attr">"geolocation"</span>: {
      <span class="hljs-attr">"country"</span>: <span class="hljs-string">"KR"</span>,
      <span class="hljs-attr">"city"</span>: <span class="hljs-string">"Seoul"</span>
    }
  }
}
</div></code></pre>
<h3 id="%E2%9C%85-%EC%8B%A0%EA%B7%9C-%EA%B8%B0%EB%8A%A5-%EB%8C%80%ED%99%94%ED%98%95-ai-%EC%B1%84%ED%8C%85-%EC%9D%B4%EB%A0%A5">âœ… [ì‹ ê·œ ê¸°ëŠ¥] ëŒ€í™”í˜• AI ì±„íŒ… ì´ë ¥</h3>
<p><strong>ì„¤ëª…</strong>: ì‚¬ìš©ìì™€ AI ì±—ë´‡ ê°„ì˜ ëŒ€í™” ë‚´ìš©ì„ ì €ì¥í•©ë‹ˆë‹¤. ê° ëŒ€í™” ì„¸ì…˜ì„ í•˜ë‚˜ì˜ ë„íë¨¼íŠ¸ë¡œ ê´€ë¦¬í•˜ì—¬ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ ì§€í•˜ê¸° ìš©ì´í•©ë‹ˆë‹¤.</p>
<h4 id="%F0%9F%92%AC-%EC%B1%84%ED%8C%85-%EC%84%B8%EC%85%98-%EA%B5%AC%EC%A1%B0">ğŸ’¬ ì±„íŒ… ì„¸ì…˜ êµ¬ì¡°</h4>
<pre><code class="language-mermaid"><div class="mermaid">graph TD
    A[Chat Session] --> B[Messages Array]
    B --> C[User Message]
    B --> D[Assistant Message]
    B --> E[System Message]

    C --> F[Content]
    C --> G[Timestamp]
    C --> H[Metadata]

    D --> I[Content]
    D --> J[Timestamp]
    D --> K[AI Model Info]

    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#fff3e0
    style D fill:#e8f5e8
    style E fill:#fce4ec
</div></code></pre>
<h4 id="%F0%9F%93%84-mongodb-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%AA%A8%EB%8D%B8-%EC%98%88%EC%8B%9C-chatsessions-%EC%BB%AC%EB%A0%89%EC%85%98">ğŸ“„ MongoDB ë°ì´í„° ëª¨ë¸ ì˜ˆì‹œ (chat_sessions ì»¬ë ‰ì…˜)</h4>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"_id"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-attr">"userId"</span>: <span class="hljs-number">123</span>,
  <span class="hljs-attr">"createdAt"</span>: <span class="hljs-string">"2025-06-21T11:00:00Z"</span>,
  <span class="hljs-attr">"lastActivity"</span>: <span class="hljs-string">"2025-06-21T11:15:00Z"</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"active"</span>, <span class="hljs-comment">// active, closed, archived</span>
  <span class="hljs-attr">"summary"</span>: <span class="hljs-string">"ìš°ìš¸ê°ì— ëŒ€í•œ ìƒë‹´ ì„¸ì…˜"</span>,
  <span class="hljs-attr">"messages"</span>: [
    {
      <span class="hljs-attr">"role"</span>: <span class="hljs-string">"user"</span>,
      <span class="hljs-attr">"content"</span>: <span class="hljs-string">"ì˜¤ëŠ˜ ë„ˆë¬´ ìš°ìš¸í•´ìš”."</span>,
      <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"2025-06-21T11:00:00Z"</span>,
      <span class="hljs-attr">"metadata"</span>: {
        <span class="hljs-attr">"sentiment"</span>: <span class="hljs-string">"negative"</span>,
        <span class="hljs-attr">"urgency"</span>: <span class="hljs-string">"medium"</span>
      }
    },
    {
      <span class="hljs-attr">"role"</span>: <span class="hljs-string">"assistant"</span>,
      <span class="hljs-attr">"content"</span>: <span class="hljs-string">"ë¬´ìŠ¨ ì¼ì´ ìˆìœ¼ì…¨ë‚˜ìš”? ì¡°ê¸ˆ ë” ìì„¸íˆ ì´ì•¼ê¸°í•´ì£¼ì‹¤ ìˆ˜ ìˆë‚˜ìš”?"</span>,
      <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"2025-06-21T11:00:30Z"</span>,
      <span class="hljs-attr">"metadata"</span>: {
        <span class="hljs-attr">"model"</span>: <span class="hljs-string">"GPT-4"</span>,
        <span class="hljs-attr">"temperature"</span>: <span class="hljs-number">0.7</span>,
        <span class="hljs-attr">"responseTime"</span>: <span class="hljs-number">1200</span>
      }
    }
  ],
  <span class="hljs-attr">"analytics"</span>: {
    <span class="hljs-attr">"totalMessages"</span>: <span class="hljs-number">8</span>,
    <span class="hljs-attr">"averageResponseTime"</span>: <span class="hljs-number">1150</span>,
    <span class="hljs-attr">"userSentiment"</span>: <span class="hljs-string">"improving"</span>,
    <span class="hljs-attr">"sessionDuration"</span>: <span class="hljs-number">900</span> <span class="hljs-comment">// seconds</span>
  }
}
</div></code></pre>
<hr>
<h2 id="4-%F0%9F%8F%97%EF%B8%8F-%EC%A0%9C%EC%95%88-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-polyglot-persistence">4. ğŸ—ï¸ ì œì•ˆ ì•„í‚¤í…ì²˜: Polyglot Persistence</h2>
<p>MariaDBì™€ MongoDBë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” í•˜ì´ë¸Œë¦¬ë“œ ì•„í‚¤í…ì²˜ì…ë‹ˆë‹¤. <strong>Auth-server</strong>ê°€ ë‘ ë°ì´í„°ë² ì´ìŠ¤ì™€ ëª¨ë‘ í†µì‹ í•˜ë©°, ë°ì´í„°ì˜ ì„±ê²©ì— ë”°ë¼ ì ì ˆí•œ ì €ì¥ì†Œë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</p>
<h3 id="%F0%9F%8E%AF-%EC%A0%84%EC%B2%B4-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98">ğŸ¯ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜</h3>
<pre><code class="language-mermaid"><div class="mermaid">graph TB
    subgraph "Client Layer"
        Client["ğŸ“± CBT-front<br/>(React-Native)"]
    end

    subgraph "API Gateway Layer"
        Gateway["ğŸšª API Gateway<br/>(Optional)"]
    end

    subgraph "Application Layer"
        AuthServer["ğŸ” Auth-server<br/>(Spring Boot)"]
        AiServer["ğŸ¤– ai-server<br/>(Python/FastAPI)"]
    end

    subgraph "Database Layer"
        subgraph "Structured Data"
            RDBMS["ğŸ—ƒï¸ MariaDB<br/>â€¢ ì‚¬ìš©ì ì •ë³´<br/>â€¢ ì¸ì¦ ë°ì´í„°<br/>â€¢ ê´€ê³„í˜• ë°ì´í„°"]
        end

        subgraph "Semi-Structured Data"
            NoSQL["ğŸ“„ MongoDB<br/>â€¢ ì¼ê¸° ë‚´ìš©<br/>â€¢ AI ë¶„ì„ ê²°ê³¼<br/>â€¢ í™œë™ ë¡œê·¸<br/>â€¢ ì±„íŒ… ì´ë ¥"]
        end

        subgraph "Cache Layer"
            Cache["âš¡ Redis<br/>â€¢ ì„¸ì…˜ ì •ë³´<br/>â€¢ Refresh Token<br/>â€¢ ì„ì‹œ ë°ì´í„°"]
        end
    end

    subgraph "External Services"
        OpenAI["ğŸ§  OpenAI API<br/>(GPT Models)"]
    end

    Client --> Gateway
    Gateway --> AuthServer
    AuthServer --> AiServer
    AiServer --> OpenAI

    AuthServer -.->|"ì‚¬ìš©ì, ì¸ì¦"| RDBMS
    AuthServer -.->|"ì¼ê¸°, ë¡œê·¸, ì±„íŒ…"| NoSQL
    AuthServer -.->|"ìºì‹œ, ì„¸ì…˜"| Cache

    style RDBMS fill:#e1f5fe
    style NoSQL fill:#fff3e0
    style Cache fill:#f3e5f5
    style AuthServer fill:#e8f5e8
    style AiServer fill:#fce4ec
</div></code></pre>
<h3 id="%F0%9F%93%8A-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B6%84%EC%82%B0-%EC%A0%84%EB%9E%B5">ğŸ“Š ë°ì´í„° ë¶„ì‚° ì „ëµ</h3>
<pre><code class="language-mermaid"><div class="mermaid">pie title ë°ì´í„° ë¶„ì‚° ë¹„ìœ¨ (ì˜ˆìƒ)
    "MariaDB (êµ¬ì¡°í™”ëœ ë°ì´í„°)" : 25
    "MongoDB (ë¹„êµ¬ì¡°í™”ëœ ë°ì´í„°)" : 60
    "Redis (ìºì‹œ ë°ì´í„°)" : 15
</div></code></pre>
<h3 id="%F0%9F%94%84-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%8F%99%EA%B8%B0%ED%99%94-%EC%A0%84%EB%9E%B5">ğŸ”„ ë°ì´í„° ë™ê¸°í™” ì „ëµ</h3>
<pre><code class="language-mermaid"><div class="mermaid">sequenceDiagram
    participant C as Client
    participant A as Auth Server
    participant M as MariaDB
    participant Mo as MongoDB
    participant R as Redis

    Note over A: ì‚¬ìš©ì ì¸ì¦
    C->>A: ë¡œê·¸ì¸ ìš”ì²­
    A->>M: ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
    M-->>A: ì‚¬ìš©ì ë°ì´í„°
    A->>R: ì„¸ì…˜ ì €ì¥
    A-->>C: ì¸ì¦ í† í°

    Note over A: ì¼ê¸° ì‘ì„±
    C->>A: ì¼ê¸° ì €ì¥ ìš”ì²­
    A->>Mo: ì¼ê¸° ë„íë¨¼íŠ¸ ì €ì¥
    Mo-->>A: ì €ì¥ ì™„ë£Œ
    A->>Mo: í™œë™ ë¡œê·¸ ì €ì¥ (ë¹„ë™ê¸°)
    A-->>C: ì €ì¥ ì„±ê³µ ì‘ë‹µ
</div></code></pre>
<h3 id="%F0%9F%92%BE-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%EB%B3%84-%EC%97%AD%ED%95%A0-%EB%B6%84%EB%8B%B4">ğŸ’¾ <strong>ë°ì´í„°ë² ì´ìŠ¤ë³„ ì—­í•  ë¶„ë‹´</strong></h3>
<table>
<thead>
<tr>
<th>ğŸ—ƒï¸ <strong>MariaDB (RDBMS)</strong></th>
<th>ğŸ“„ <strong>MongoDB (NoSQL)</strong></th>
<th>âš¡ <strong>Redis (Cache)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>âœ… ì‚¬ìš©ì ê³„ì • ì •ë³´</td>
<td>âœ… ì¼ê¸° ë‚´ìš© ë° AI ë¶„ì„</td>
<td>âœ… JWT Refresh Token</td>
</tr>
<tr>
<td>âœ… ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬</td>
<td>âœ… ì‚¬ìš©ì í™œë™ ë¡œê·¸</td>
<td>âœ… ì„¸ì…˜ ì •ë³´</td>
</tr>
<tr>
<td>âœ… ì‹œìŠ¤í…œ ì„¤ì •</td>
<td>âœ… ëŒ€í™”í˜• AI ì±„íŒ… ì´ë ¥</td>
<td>âœ… ì„ì‹œ ìºì‹œ ë°ì´í„°</td>
</tr>
<tr>
<td>âœ… ê´€ë¦¬ì ê¸°ëŠ¥</td>
<td>âœ… ì‹¤ì‹œê°„ ì•Œë¦¼ ë°ì´í„°</td>
<td>âœ… API ì‘ë‹µ ìºì‹œ</td>
</tr>
</tbody>
</table>
<h3 id="%F0%9F%94%97-%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%86%B5%EC%8B%A0-%ED%8C%A8%ED%84%B4">ğŸ”— ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í†µì‹  íŒ¨í„´</h3>
<pre><code class="language-mermaid"><div class="mermaid">graph LR
    subgraph "Synchronous Communication"
        A[Auth API] -->|HTTP/REST| B[User Service]
        A -->|HTTP/REST| C[Diary Service]
    end

    subgraph "Asynchronous Communication"
        D[Event Publisher] -->|Message Queue| E[Log Service]
        D -->|Message Queue| F[Analytics Service]
        D -->|Message Queue| G[Notification Service]
    end

    subgraph "Data Access Pattern"
        H[Repository Layer] --> I[(MariaDB)]
        H --> J[(MongoDB)]
        H --> K[(Redis)]
    end

    style A fill:#e3f2fd
    style D fill:#fff3e0
    style H fill:#f3e5f5
</div></code></pre>
<hr>
<h2 id="5-%F0%9F%9A%80-%EB%8B%A8%EA%B3%84%EB%B3%84-%EA%B5%AC%ED%98%84-%EC%A0%84%EB%9E%B5">5. ğŸš€ ë‹¨ê³„ë³„ êµ¬í˜„ ì „ëµ</h2>
<h3 id="%F0%9F%93%85-%EA%B5%AC%ED%98%84-%EB%A1%9C%EB%93%9C%EB%A7%B5">ğŸ“… êµ¬í˜„ ë¡œë“œë§µ</h3>
<pre><code class="language-mermaid"><div class="mermaid">gantt
    title MongoDB ë„ì… ë‹¨ê³„ë³„ ì¼ì •
    dateFormat  YYYY-MM-DD
    section Phase 1: ì¸í”„ë¼ êµ¬ì¶•
    Docker í™˜ê²½ ì„¤ì •     :p1-1, 2025-06-22, 3d
    MongoDB ì„¤ì¹˜ ë° ì„¤ì •  :p1-2, after p1-1, 2d
    ê°œë°œí™˜ê²½ êµ¬ì¶•        :p1-3, after p1-2, 2d

    section Phase 2: ë°±ì—”ë“œ ê°œë°œ
    ì˜ì¡´ì„± ì¶”ê°€          :p2-1, after p1-3, 1d
    Repository ê³„ì¸µ ê°œë°œ :p2-2, after p2-1, 5d
    Service ê³„ì¸µ ìˆ˜ì •    :p2-3, after p2-2, 4d
    API ì—”ë“œí¬ì¸íŠ¸ ìˆ˜ì •   :p2-4, after p2-3, 3d

    section Phase 3: ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
    ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± :p3-1, after p2-4, 4d
    í…ŒìŠ¤íŠ¸ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ :p3-2, after p3-1, 2d
    ìš´ì˜ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜   :p3-3, after p3-2, 3d

    section Phase 4: í…ŒìŠ¤íŠ¸ ë° ë°°í¬
    ë‹¨ìœ„ í…ŒìŠ¤íŠ¸          :p4-1, after p3-3, 3d
    í†µí•© í…ŒìŠ¤íŠ¸          :p4-2, after p4-1, 4d
    ì„±ëŠ¥ í…ŒìŠ¤íŠ¸          :p4-3, after p4-2, 3d
    ìš´ì˜ ë°°í¬           :p4-4, after p4-3, 2d
</div></code></pre>
<h3 id="%F0%9F%90%B3-1-%EC%9D%B8%ED%94%84%EB%9D%BC-%EC%84%A4%EC%A0%95-docker-composeyml">ğŸ³ 1. ì¸í”„ë¼ ì„¤ì • (docker-compose.yml)</h3>
<p>docker-compose.yml íŒŒì¼ì— MongoDB ì„œë¹„ìŠ¤ë¥¼ ì¶”ê°€í•˜ê³ , Auth-serverê°€ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë„¤íŠ¸ì›Œí¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># docker-compose.yml ì¶”ê°€ ë‚´ìš©</span>
<span class="hljs-attr">version:</span> <span class="hljs-string">"3.8"</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># ... ê¸°ì¡´ ì„œë¹„ìŠ¤ë“¤ ...</span>

  <span class="hljs-attr">mongodb:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mongo:7.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">cbt-mongodb</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MONGO_INITDB_ROOT_USERNAME:</span> <span class="hljs-string">admin</span>
      <span class="hljs-attr">MONGO_INITDB_ROOT_PASSWORD:</span> <span class="hljs-string">secure_password</span>
      <span class="hljs-attr">MONGO_INITDB_DATABASE:</span> <span class="hljs-string">cbt_diary</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"27017:27017"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mongodb_data:/data/db</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./mongo-init:/docker-entrypoint-initdb.d</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">cbt-network</span>

  <span class="hljs-attr">mongo-express:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mongo-express:1.0.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">cbt-mongo-express</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8081:8081"</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">ME_CONFIG_MONGODB_ADMINUSERNAME:</span> <span class="hljs-string">admin</span>
      <span class="hljs-attr">ME_CONFIG_MONGODB_ADMINPASSWORD:</span> <span class="hljs-string">secure_password</span>
      <span class="hljs-attr">ME_CONFIG_MONGODB_URL:</span> <span class="hljs-string">mongodb://admin:secure_password@mongodb:27017/</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mongodb</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">cbt-network</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">mongodb_data:</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">cbt-network:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</div></code></pre>
<h3 id="%E2%9A%99%EF%B8%8F-2-%EB%B0%B1%EC%97%94%EB%93%9C-%EC%9D%98%EC%A1%B4%EC%84%B1-%EB%B0%8F-%EC%84%A4%EC%A0%95-auth-server">âš™ï¸ 2. ë°±ì—”ë“œ ì˜ì¡´ì„± ë° ì„¤ì • (Auth-server)</h3>
<h4 id="%F0%9F%93%A6-buildgradle-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%B6%94%EA%B0%80">ğŸ“¦ build.gradle ì˜ì¡´ì„± ì¶”ê°€</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">dependencies</span> {
    <span class="hljs-comment">// ... ê¸°ì¡´ ì˜ì¡´ì„±ë“¤ ...</span>

    <span class="hljs-comment">// MongoDB ê´€ë ¨ ì˜ì¡´ì„±</span>
    implementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-data-mongodb'</span>
    implementation <span class="hljs-string">'org.springframework.data:spring-data-mongodb'</span>

    <span class="hljs-comment">// JSON ì²˜ë¦¬ ê°œì„ </span>
    implementation <span class="hljs-string">'com.fasterxml.jackson.core:jackson-databind'</span>
    implementation <span class="hljs-string">'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'</span>

    <span class="hljs-comment">// í…ŒìŠ¤íŠ¸ìš© ë‚´ì¥ MongoDB</span>
    testImplementation <span class="hljs-string">'de.flapdoodle.embed:de.flapdoodle.embed.mongo'</span>
}
</div></code></pre>
<h4 id="%F0%9F%94%A7-applicationproperties-%EC%84%A4%EC%A0%95">ğŸ”§ application.properties ì„¤ì •</h4>
<pre class="hljs"><code><div><span class="hljs-comment"># MongoDB ì„¤ì •</span>
<span class="hljs-meta">spring.data.mongodb.uri</span>=<span class="hljs-string">mongodb://admin:secure_password@localhost:27017/cbt_diary?authSource=admin</span>
<span class="hljs-meta">spring.data.mongodb.auto-index-creation</span>=<span class="hljs-string">true</span>
<span class="hljs-comment">
# JPAì™€ MongoDB ê³µì¡´ ì„¤ì •</span>
<span class="hljs-meta">spring.jpa.hibernate.ddl-auto</span>=<span class="hljs-string">validate</span>
<span class="hljs-meta">spring.jpa.show-sql</span>=<span class="hljs-string">false</span>
<span class="hljs-comment">
# ë¡œê¹… ì„¤ì •</span>
<span class="hljs-meta">logging.level.org.springframework.data.mongodb</span>=<span class="hljs-string">DEBUG</span>
<span class="hljs-meta">logging.level.org.mongodb.driver</span>=<span class="hljs-string">INFO</span>
</div></code></pre>
<h3 id="%F0%9F%8F%9B%EF%B8%8F-3-%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%B0%8F-%EB%A6%AC%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC-%EC%9E%AC%EC%84%A4%EA%B3%84">ğŸ›ï¸ 3. ë„ë©”ì¸ ë° ë¦¬í¬ì§€í† ë¦¬ ì¬ì„¤ê³„</h3>
<h4 id="%F0%9F%93%84-diarydocument-%ED%81%B4%EB%9E%98%EC%8A%A4">ğŸ“„ DiaryDocument í´ë˜ìŠ¤</h4>
<pre class="hljs"><code><div><span class="hljs-meta">@Document</span>(collection = <span class="hljs-string">"diaries"</span>)
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DiaryDocument</span> </span>{

    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> String id;

    <span class="hljs-meta">@Indexed</span>
    <span class="hljs-keyword">private</span> Long userId; <span class="hljs-comment">// MariaDB Userì™€ ì—°ê²°</span>

    <span class="hljs-keyword">private</span> String title;
    <span class="hljs-keyword">private</span> String content;
    <span class="hljs-keyword">private</span> String weather;

    <span class="hljs-meta">@CreatedDate</span>
    <span class="hljs-keyword">private</span> LocalDateTime createdAt;

    <span class="hljs-meta">@LastModifiedDate</span>
    <span class="hljs-keyword">private</span> LocalDateTime updatedAt;

    <span class="hljs-keyword">private</span> ReportSubDocument report;

    <span class="hljs-comment">// ì¸ë±ìŠ¤ ì„¤ì •ì„ ìœ„í•œ ì»´íŒŒìš´ë“œ ì¸ë±ìŠ¤</span>
    <span class="hljs-meta">@CompoundIndex</span>(name = <span class="hljs-string">"user_date_idx"</span>,
                   def = <span class="hljs-string">"{'userId': 1, 'createdAt': -1}"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Indexes</span> </span>{}
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReportSubDocument</span> </span>{
    <span class="hljs-keyword">private</span> String status;
    <span class="hljs-keyword">private</span> LocalDateTime analysisDate;
    <span class="hljs-keyword">private</span> List&lt;EmotionData&gt; emotions;
    <span class="hljs-keyword">private</span> List&lt;CognitiveDistortion&gt; cognitiveDistortions;
    <span class="hljs-keyword">private</span> List&lt;String&gt; solutions;
    <span class="hljs-keyword">private</span> AnalysisMetadata metadata;
}
</div></code></pre>
<h4 id="%F0%9F%94%8D-repository-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4">ğŸ” Repository ì¸í„°í˜ì´ìŠ¤</h4>
<pre class="hljs"><code><div><span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">DiaryMongoRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">MongoRepository</span>&lt;<span class="hljs-title">DiaryDocument</span>, <span class="hljs-title">String</span>&gt; </span>{

    <span class="hljs-comment">// ì‚¬ìš©ìë³„ ì¼ê¸° ì¡°íšŒ (í˜ì´ì§•)</span>
    <span class="hljs-function">Page&lt;DiaryDocument&gt; <span class="hljs-title">findByUserIdOrderByCreatedAtDesc</span><span class="hljs-params">(
        Long userId, Pageable pageable)</span></span>;

    <span class="hljs-comment">// íŠ¹ì • ë‚ ì§œ ë²”ìœ„ì˜ ì¼ê¸° ì¡°íšŒ</span>
    <span class="hljs-function">List&lt;DiaryDocument&gt; <span class="hljs-title">findByUserIdAndCreatedAtBetween</span><span class="hljs-params">(
        Long userId, LocalDateTime start, LocalDateTime end)</span></span>;

    <span class="hljs-comment">// AI ë¶„ì„ ì™„ë£Œëœ ì¼ê¸°ë§Œ ì¡°íšŒ</span>
    <span class="hljs-function">List&lt;DiaryDocument&gt; <span class="hljs-title">findByUserIdAndReport_Status</span><span class="hljs-params">(
        Long userId, String status)</span></span>;

    <span class="hljs-comment">// ì „ë¬¸ ê²€ìƒ‰ (MongoDB Atlas Search í™œìš©)</span>
    <span class="hljs-meta">@Query</span>(<span class="hljs-string">"{ '$text': { '$search': ?0 } }"</span>)
    <span class="hljs-function">List&lt;DiaryDocument&gt; <span class="hljs-title">findByContentText</span><span class="hljs-params">(String searchText)</span></span>;

    <span class="hljs-comment">// ê°ì •ë³„ ì¼ê¸° ì¡°íšŒ</span>
    <span class="hljs-meta">@Query</span>(<span class="hljs-string">"{ 'userId': ?0, 'report.emotions.name': ?1 }"</span>)
    <span class="hljs-function">List&lt;DiaryDocument&gt; <span class="hljs-title">findByUserIdAndEmotion</span><span class="hljs-params">(Long userId, String emotion)</span></span>;
}
</div></code></pre>
<h3 id="%F0%9F%94%84-4-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A1%9C%EC%A7%81-%EB%B3%80%EA%B2%BD%EC%A0%90">ğŸ”„ 4. ì„œë¹„ìŠ¤ ë¡œì§ ë³€ê²½ì </h3>
<h4 id="%E2%9A%96%EF%B8%8F-as-is-vs-to-be-%EB%B9%84%EA%B5%90">âš–ï¸ AS-IS vs TO-BE ë¹„êµ</h4>
<pre><code class="language-mermaid"><div class="mermaid">graph TB
    subgraph "AS-IS (JPA ê¸°ë°˜)"
        A1[DiaryService] --> A2[DiaryRepository]
        A1 --> A3[ReportRepository]
        A2 --> A4[(MariaDB)]
        A3 --> A4
        A5[AI ë¶„ì„ í›„] --> A6[ë³„ë„ Report ì €ì¥]
        A6 --> A7[Diary-Report ì—°ê²°]
    end

    subgraph "TO-BE (MongoDB ê¸°ë°˜)"
        B1[DiaryService] --> B2[DiaryMongoRepository]
        B2 --> B3[(MongoDB)]
        B4[AI ë¶„ì„ í›„] --> B5[Diary Document ì—…ë°ì´íŠ¸]
        B5 --> B6[í•˜ë‚˜ì˜ ë„íë¨¼íŠ¸ì— í†µí•©]
    end

    style A4 fill:#ffcdd2
    style B3 fill:#c8e6c9
</div></code></pre>
<h4 id="%F0%9F%93%9D-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A1%9C%EC%A7%81-%EA%B5%AC%ED%98%84-%EC%98%88%EC%8B%9C">ğŸ“ ì„œë¹„ìŠ¤ ë¡œì§ êµ¬í˜„ ì˜ˆì‹œ</h4>
<pre class="hljs"><code><div><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DiaryService</span> </span>{

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DiaryMongoRepository diaryMongoRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository; <span class="hljs-comment">// MariaDB</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AiAnalysisService aiAnalysisService;

    <span class="hljs-function"><span class="hljs-keyword">public</span> DiaryDocument <span class="hljs-title">createDiary</span><span class="hljs-params">(Long userId, CreateDiaryRequest request)</span> </span>{
        <span class="hljs-comment">// 1. ì‚¬ìš©ì ì¡´ì¬ í™•ì¸ (MariaDB)</span>
        User user = userRepository.findById(userId)
            .orElseThrow(() -&gt; <span class="hljs-keyword">new</span> UserNotFoundException(<span class="hljs-string">"User not found"</span>));

        <span class="hljs-comment">// 2. ì¼ê¸° ë„íë¨¼íŠ¸ ìƒì„± ë° ì €ì¥ (MongoDB)</span>
        DiaryDocument diary = DiaryDocument.builder()
            .userId(userId)
            .title(request.getTitle())
            .content(request.getContent())
            .weather(request.getWeather())
            .build();

        DiaryDocument savedDiary = diaryMongoRepository.save(diary);

        <span class="hljs-comment">// 3. AI ë¶„ì„ ìš”ì²­ (ë¹„ë™ê¸°)</span>
        CompletableFuture.runAsync(() -&gt; {
            <span class="hljs-keyword">try</span> {
                ReportSubDocument report = aiAnalysisService.analyzeContent(
                    savedDiary.getContent());
                savedDiary.setReport(report);
                diaryMongoRepository.save(savedDiary);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.error(<span class="hljs-string">"AI ë¶„ì„ ì‹¤íŒ¨: diaryId={}"</span>, savedDiary.getId(), e);
            }
        });

        <span class="hljs-keyword">return</span> savedDiary;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> Page&lt;DiaryDocument&gt; <span class="hljs-title">getDiariesByDate</span><span class="hljs-params">(Long userId, LocalDate date,
                                               Pageable pageable)</span> </span>{
        LocalDateTime startOfDay = date.atStartOfDay();
        LocalDateTime endOfDay = date.atTime(<span class="hljs-number">23</span>, <span class="hljs-number">59</span>, <span class="hljs-number">59</span>);

        <span class="hljs-keyword">return</span> diaryMongoRepository.findByUserIdAndCreatedAtBetween(
            userId, startOfDay, endOfDay, pageable);
    }
}
</div></code></pre>
<h3 id="%F0%9F%93%8A-5-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%EC%A0%84%EB%9E%B5">ğŸ“Š 5. ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ</h3>
<pre><code class="language-mermaid"><div class="mermaid">flowchart TD
    A[ê¸°ì¡´ MariaDB ë°ì´í„°] --> B{ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸}
    B --> C[ë°ì´í„° ê²€ì¦]
    C --> D{ê²€ì¦ ì„±ê³µ?}
    D -->|YES| E[MongoDB ë³€í™˜]
    D -->|NO| F[ì˜¤ë¥˜ ë¡œê·¸ ê¸°ë¡]
    F --> G[ìˆ˜ë™ ìˆ˜ì •]
    G --> C
    E --> H[MongoDB ì €ì¥]
    H --> I[ë™ê¸°í™” ê²€ì¦]
    I --> J{ë™ê¸°í™” ì™„ë£Œ?}
    J -->|YES| K[ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ]
    J -->|NO| L[ë¡¤ë°± ì²˜ë¦¬]

    style A fill:#ffcdd2
    style K fill:#c8e6c9
    style L fill:#ffcdd2
</div></code></pre>
<hr>
<h2 id="6-%F0%9F%93%88-%EA%B8%B0%EB%8C%80-%ED%9A%A8%EA%B3%BC-%EB%B0%8F-%EC%84%B1%EA%B3%BC-%EC%A7%80%ED%91%9C">6. ğŸ“ˆ ê¸°ëŒ€ íš¨ê³¼ ë° ì„±ê³¼ ì§€í‘œ</h2>
<h3 id="%F0%9F%8E%AF-%ED%95%B5%EC%8B%AC-%EA%B8%B0%EB%8C%80-%ED%9A%A8%EA%B3%BC">ğŸ¯ í•µì‹¬ ê¸°ëŒ€ íš¨ê³¼</h3>
<pre><code class="language-mermaid"><div class="mermaid">graph TD
    A[MongoDB ë„ì…] --> B[ê°œë°œ ìœ ì—°ì„± ì¦ëŒ€]
    A --> C[ì„±ëŠ¥ í–¥ìƒ]
    A --> D[í™•ì¥ì„± í™•ë³´]
    A --> E[ìµœì í™”ëœ ì•„í‚¤í…ì²˜]

    B --> B1[ìŠ¤í‚¤ë§ˆ ë³€ê²½ ë¶ˆí•„ìš”]
    B --> B2[ë¹ ë¥¸ ê¸°ëŠ¥ ì¶”ê°€]
    B --> B3[AI ëª¨ë¸ ì‹¤í—˜ ìš©ì´]

    C --> C1[JOIN ì—°ì‚° ì œê±°]
    C --> C2[ë‹¨ì¼ ì¿¼ë¦¬ ì¡°íšŒ]
    C --> C3[ì½ê¸° ì„±ëŠ¥ í–¥ìƒ]

    D --> D1[ìˆ˜í‰ì  í™•ì¥]
    D --> D2[ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬]
    D --> D3[ìƒ¤ë”© ì§€ì›]

    E --> E1[ë°ì´í„° íŠ¹ì„±ë³„ ìµœì í™”]
    E --> E2[ì‹œìŠ¤í…œ íš¨ìœ¨ì„±]
    E --> E3[ì•ˆì •ì„± í–¥ìƒ]

    style A fill:#e3f2fd
    style B fill:#fff3e0
    style C fill:#e8f5e8
    style D fill:#f3e5f5
    style E fill:#fce4ec
</div></code></pre>
<h3 id="%F0%9F%93%8A-%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0-%EC%98%88%EC%83%81-%EC%A7%80%ED%91%9C">ğŸ“Š ì„±ëŠ¥ ê°œì„  ì˜ˆìƒ ì§€í‘œ</h3>
<pre><code class="language-mermaid"><div class="mermaid">graph LR
    subgraph "ì‘ë‹µ ì‹œê°„ ê°œì„ "
        A[ì¼ê¸° ëª©ë¡ ì¡°íšŒ<br/>300ms â†’ 80ms<br/>73% ê°œì„ ]
        B[ì¼ê¸° ìƒì„¸ ì¡°íšŒ<br/>450ms â†’ 120ms<br/>73% ê°œì„ ]
        C[AI ë¶„ì„ ê²°ê³¼ ì¡°íšŒ<br/>200ms â†’ 50ms<br/>75% ê°œì„ ]
    end

    subgraph "ì²˜ë¦¬ëŸ‰ ê°œì„ "
        D[ë™ì‹œ ì‚¬ìš©ì<br/>100 â†’ 500<br/>5ë°° ì¦ê°€]
        E[ì¼ê¸° ì‘ì„± TPS<br/>50 â†’ 200<br/>4ë°° ì¦ê°€]
        F[ë°ì´í„° ì €ì¥ ì†ë„<br/>1000/s â†’ 5000/s<br/>5ë°° ì¦ê°€]
    end

    style A fill:#c8e6c9
    style B fill:#c8e6c9
    style C fill:#c8e6c9
    style D fill:#bbdefb
    style E fill:#bbdefb
    style F fill:#bbdefb
</div></code></pre>
<h3 id="%F0%9F%92%B0-%EB%B9%84%EC%9A%A9-%ED%9A%A8%EC%9C%A8%EC%84%B1-%EB%B6%84%EC%84%9D">ğŸ’° ë¹„ìš© íš¨ìœ¨ì„± ë¶„ì„</h3>
<table>
<thead>
<tr>
<th>ğŸ’¡ <strong>í•­ëª©</strong></th>
<th>ğŸ”´ <strong>í˜„ì¬ (MariaDB Only)</strong></th>
<th>ğŸŸ¢ <strong>ê°œì„  í›„ (Hybrid)</strong></th>
<th>ğŸ“ˆ <strong>ì ˆì•½ íš¨ê³¼</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ì„œë²„ ë¦¬ì†ŒìŠ¤</strong></td>
<td>ë‹¨ì¼ DB ì„œë²„ ê³ ì‚¬ì–‘ í•„ìš”</td>
<td>ì—­í• ë³„ ìµœì í™”ëœ ë¦¬ì†ŒìŠ¤ í• ë‹¹</td>
<td><strong>30% ë¹„ìš© ì ˆì•½</strong></td>
</tr>
<tr>
<td><strong>ê°œë°œ ì‹œê°„</strong></td>
<td>ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ ë‹¤ìš´íƒ€ì„ ë°œìƒ</td>
<td>ë¬´ì¤‘ë‹¨ ìŠ¤í‚¤ë§ˆ ë³€ê²½</td>
<td><strong>50% ì‹œê°„ ë‹¨ì¶•</strong></td>
</tr>
<tr>
<td><strong>ìœ ì§€ë³´ìˆ˜</strong></td>
<td>ë³µì¡í•œ JOIN ì¿¼ë¦¬ ìµœì í™”</td>
<td>ë‹¨ìˆœí•œ ë„íë¨¼íŠ¸ ì¡°íšŒ</td>
<td><strong>40% ì‘ì—…ëŸ‰ ê°ì†Œ</strong></td>
</tr>
<tr>
<td><strong>í™•ì¥ ë¹„ìš©</strong></td>
<td>ìˆ˜ì§ í™•ì¥ (Scale-up)</td>
<td>ìˆ˜í‰ í™•ì¥ (Scale-out)</td>
<td><strong>60% ë¹„ìš© ì ˆì•½</strong></td>
</tr>
</tbody>
</table>
<h3 id="%F0%9F%93%8B-%EC%83%81%EC%84%B8-%EC%84%B1%EA%B3%BC-%EC%A7%80%ED%91%9C">ğŸ“‹ ìƒì„¸ ì„±ê³¼ ì§€í‘œ</h3>
<h4 id="%F0%9F%94%A7-%EA%B8%B0%EC%88%A0%EC%A0%81-%EC%A7%80%ED%91%9C">ğŸ”§ <strong>ê¸°ìˆ ì  ì§€í‘œ</strong></h4>
<ul>
<li><strong>ì‘ë‹µ ì‹œê°„</strong>: í‰ê·  ì‘ë‹µ ì‹œê°„ 70% ì´ìƒ ê°œì„ </li>
<li><strong>ì²˜ë¦¬ëŸ‰</strong>: ë™ì‹œ ì‚¬ìš©ì ìˆ˜ 5ë°° ì¦ê°€ ì§€ì›</li>
<li><strong>ê°€ìš©ì„±</strong>: 99.9% ì´ìƒ ì‹œìŠ¤í…œ ê°€ìš©ì„± ìœ ì§€</li>
<li><strong>í™•ì¥ì„±</strong>: ì›” 1TB ì´ìƒ ë°ì´í„° ì¦ê°€ ëŒ€ì‘ ê°€ëŠ¥</li>
</ul>
<h4 id="%F0%9F%91%A5-%EC%82%AC%EC%9A%A9%EC%9E%90-%EA%B2%BD%ED%97%98-%EC%A7%80%ED%91%9C">ğŸ‘¥ <strong>ì‚¬ìš©ì ê²½í—˜ ì§€í‘œ</strong></h4>
<ul>
<li><strong>ë§Œì¡±ë„</strong>: ì‚¬ìš©ì ë§Œì¡±ë„ 4.5/5.0 ì´ìƒ</li>
<li><strong>ì´íƒˆë¥ </strong>: ì•± ì´íƒˆë¥  20% ì´ìƒ ê°ì†Œ</li>
<li><strong>ì‚¬ìš© ë¹ˆë„</strong>: ì¼ì¼ í™œì„± ì‚¬ìš©ì 30% ì¦ê°€</li>
<li><strong>ê¸°ëŠ¥ í™œìš©ë„</strong>: AI ë¶„ì„ ê¸°ëŠ¥ ì‚¬ìš©ë¥  60% ì´ìƒ</li>
</ul>
<h4 id="%F0%9F%92%BC-%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4-%EC%A7%80%ED%91%9C">ğŸ’¼ <strong>ë¹„ì¦ˆë‹ˆìŠ¤ ì§€í‘œ</strong></h4>
<ul>
<li><strong>ê°œë°œ ì†ë„</strong>: ìƒˆ ê¸°ëŠ¥ ê°œë°œ ì‹œê°„ 50% ë‹¨ì¶•</li>
<li><strong>ìš´ì˜ ë¹„ìš©</strong>: ì¸í”„ë¼ ìš´ì˜ ë¹„ìš© 30% ì ˆê°</li>
<li><strong>ë§¤ì¶œ ì„±ì¥</strong>: ì›” ë§¤ì¶œ 20% ì´ìƒ ì¦ê°€</li>
<li><strong>ì‹œì¥ ì ìœ ìœ¨</strong>: CBT ì•± ì‹œì¥ì—ì„œ ê²½ìŸ ìš°ìœ„ í™•ë³´</li>
</ul>
<h3 id="%E2%9A%A0%EF%B8%8F-%EB%A6%AC%EC%8A%A4%ED%81%AC-%EA%B4%80%EB%A6%AC-%EB%B0%8F-%EB%8C%80%EC%9D%91-%EB%B0%A9%EC%95%88">âš ï¸ ë¦¬ìŠ¤í¬ ê´€ë¦¬ ë° ëŒ€ì‘ ë°©ì•ˆ</h3>
<pre><code class="language-mermaid"><div class="mermaid">graph TD
    A[ë¦¬ìŠ¤í¬ ì‹ë³„] --> B{ë¦¬ìŠ¤í¬ ìœ í˜•}

    B --> C[ê¸°ìˆ ì  ë¦¬ìŠ¤í¬]
    B --> D[ìš´ì˜ì  ë¦¬ìŠ¤í¬]
    B --> E[ë¹„ì¦ˆë‹ˆìŠ¤ ë¦¬ìŠ¤í¬]

    C --> C1[ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨]
    C --> C2[ì„±ëŠ¥ ì €í•˜]
    C --> C3[í˜¸í™˜ì„± ë¬¸ì œ]

    D --> D1[íŒ€ í•™ìŠµ ê³¡ì„ ]
    D --> D2[ìš´ì˜ ë³µì¡ì„± ì¦ê°€]
    D --> D3[ëª¨ë‹ˆí„°ë§ ì–´ë ¤ì›€]

    E --> E1[ê°œë°œ ì¼ì • ì§€ì—°]
    E --> E2[ì¶”ê°€ ë¹„ìš© ë°œìƒ]
    E --> E3[ì‚¬ìš©ì ì„œë¹„ìŠ¤ ì¤‘ë‹¨]

    C1 --> F1[ë‹¨ê³„ì  ë§ˆì´ê·¸ë ˆì´ì…˜<br/>ë¡¤ë°± ê³„íš ìˆ˜ë¦½]
    C2 --> F2[ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê°•í™”<br/>ëª¨ë‹ˆí„°ë§ ë„êµ¬ ë„ì…]
    C3 --> F3[í˜¸í™˜ì„± ë§¤íŠ¸ë¦­ìŠ¤ ì‘ì„±<br/>ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸]

    D1 --> G1[MongoDB êµìœ¡ í”„ë¡œê·¸ë¨<br/>ë‚´ë¶€ ì„¸ë¯¸ë‚˜ ì§„í–‰]
    D2 --> G2[ìš´ì˜ ë§¤ë‰´ì–¼ ì‘ì„±<br/>ìë™í™” ë„êµ¬ í™œìš©]
    D3 --> G3[í†µí•© ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ<br/>ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬ì¶•]

    E1 --> H1[ë²„í¼ ê¸°ê°„ ì„¤ì •<br/>ë§ˆì¼ìŠ¤í†¤ ê´€ë¦¬]
    E2 --> H2[ì˜ˆì‚° ê³„íš ìˆ˜ë¦½<br/>ë¹„ìš© ëª¨ë‹ˆí„°ë§]
    E3 --> H3[ë¬´ì¤‘ë‹¨ ë°°í¬ ì „ëµ<br/>ê¸´ê¸‰ ëŒ€ì‘ ê³„íš]

    style A fill:#ffcdd2
    style F1 fill:#c8e6c9
    style F2 fill:#c8e6c9
    style F3 fill:#c8e6c9
    style G1 fill:#bbdefb
    style G2 fill:#bbdefb
    style G3 fill:#bbdefb
    style H1 fill:#fff3e0
    style H2 fill:#fff3e0
    style H3 fill:#fff3e0
</div></code></pre>
<hr>
<h2 id="%F0%9F%93%9D-%EA%B2%B0%EB%A1%A0-%EB%B0%8F-%EC%A0%9C%EC%95%88">ğŸ“ ê²°ë¡  ë° ì œì•ˆ</h2>
<h3 id="%F0%9F%8E%AF-%ED%95%B5%EC%8B%AC-%EB%A9%94%EC%8B%9C%EC%A7%80">ğŸ¯ <strong>í•µì‹¬ ë©”ì‹œì§€</strong></h3>
<p>CBT Diary í”„ë¡œì íŠ¸ì— MongoDBë¥¼ ë„ì…í•˜ëŠ” ê²ƒì€ ë‹¨ìˆœí•œ ê¸°ìˆ  ìŠ¤íƒ ì¶”ê°€ê°€ ì•„ë‹Œ, <strong>ë¯¸ë˜ ì§€í–¥ì ì¸ ì•„í‚¤í…ì²˜ í˜ì‹ </strong>ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ì „ëµì  ê°€ì¹˜ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="language-mermaid"><div class="mermaid">mindmap
  root((ì „ëµì  ê°€ì¹˜))
    ê¸°ìˆ ì  ìš°ìœ„
      í™•ì¥ì„± í™•ë³´
      ì„±ëŠ¥ ìµœì í™”
      ê°œë°œ ìƒì‚°ì„± í–¥ìƒ
    ë¹„ì¦ˆë‹ˆìŠ¤ ì„±ì¥
      ë¹ ë¥¸ ê¸°ëŠ¥ ì¶œì‹œ
      ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
      ì‹œì¥ ê²½ìŸë ¥ ê°•í™”
    ìš´ì˜ íš¨ìœ¨ì„±
      ë¹„ìš© ìµœì í™”
      ìœ ì§€ë³´ìˆ˜ ê°„ì†Œí™”
      ì•ˆì •ì„± í–¥ìƒ
</div></code></pre>
<p><em>ë³¸ ë¬¸ì„œëŠ” CBT Diary í”„ë¡œì íŠ¸ì˜ ê¸°ìˆ ì  ë°œì „ê³¼ ì‚¬ìš©ì ê²½í—˜ í–¥ìƒì„ ìœ„í•´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</em></p>
<p><strong>ğŸ“Š ë¬¸ì„œ ì •ë³´</strong></p>
<ul>
<li><strong>ë²„ì „</strong>: v1.0</li>
<li><strong>ì‘ì„±ì¼</strong>: 2025ë…„ 6ì›” 21ì¼</li>
<li><strong>ê²€í† ì</strong>: ê°œë°œíŒ€</li>
<li><strong>ìŠ¹ì¸ì</strong>: CTO</li>
<li><strong>ë‹¤ìŒ ë¦¬ë·°</strong>: 2025ë…„ 6ì›” 28ì¼</li>
</ul>

</body>
</html>
