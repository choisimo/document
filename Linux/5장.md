## 파일 시스템 구조
- 부트블록 (Boot block)
```text
파일 시스템 시작부에 위치하고 보통 첫 번째 섹터 차지
리눅스 시작 시 사용되는 부트스트랩 코드가 저장되는 블록
```
- 슈퍼 블록 (Super block)
```text
전체 파일 시스템에 대한 정보를 저장
> 총 블록수, 사용 가능 i-node 개수, 사용 가능한 블록 비트맵, 블록 크기 ,사용 중(가능)인 블록수 등
```
- i-리스트 (i-list)
```text
각 파일을 나타내는 모든 i-node 들의 list
한 블록은 약 40개 정도의 i-node 포함
```
- 데이터 블록 (Data block)
```text
파일의 내용(데이터)를 저장하기 위한 블록들
```

## i-node (i-node)
```text
한 파일은 하나의 i-node를 가진다.
```
```text
파일에 대한 모든 정보를 가지고 있음.
> 파일 타입 : 일반 파일, 디렉터리, 블록 장치 (/dev/sda), 문자 장치 (/dev/tty) 등
> 파일 크기
> 사용 권한
> 파일 소유자, 그룹, 그외
> 접근 및 갱신 시간
> 데이터 블록에 대한 포인터(주소) 등
``` 

## 블록 포인터
- 데이터 블록에 대한 포인터
```text
> 파일의 내용을 저장하기 위해 할당된 데이터 블록의 주소
```
- 하나의 i-node 내의 블록 포인터
```text
> 직접 블록 포인터 : 10개
> 간접 블록 포인터 : 1개
> 이중 간접 블록 포인터 : 1개
> 참고 : 최근 파일 시스템에서는 삼중 블록 포인터를 포함하기도 함
```
- 최대 가리킬 수 있는 데이터 블록의 개수
```text
> 직접 블록 포인터 10개 -> 블록 10개
> 간접 블록 포인터 1개 -> 1024 개의 직접 블록 포인터
>> 가정 : 블록 포인터 크기 4 byte, 한 블록의 크기 4096 byte
> 이중 간접 블록 포인터 1개 -> 1024 개의 간접 블록 포인터 -> 1024 * 1024 개의 직접 블록 포인터
> 총 개수 : 1 * 10 + 1 * 1,024 + 1,024 * 1,024 = 1,049,610
```

## 파일 입출력 구현 
- 파일 입출력 구현을 위한 커널 내 자료구조
```text
> 파일 디스크립터 배열 (fd array)
> 열린 파일 테이블 (Open File Table)
> 동적 i-node 테이블 (Active i-node table)
```
<img src="https://github.com/choisimo/document/assets/150008602/b173b661-0b1e-4b28-935e-07550c2b4a5e">
![스크린샷 2024-04-14 025612](https://github.com/choisimo/document/assets/150008602/b173b661-0b1e-4b28-935e-07550c2b4a5e)
